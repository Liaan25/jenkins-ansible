# ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

> **–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π sudoers –¥–ª—è IDM**

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** November 19, 2024  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ‚úÖ

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (3 —à—Ç.)

–í—Å–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ bash-—Å–∫—Ä–∏–ø—Ç—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:

‚úÖ **`scripts/wrappers/manage_firewall.sh`**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ iptables –ø—Ä–∞–≤–∏–ª–∞–º–∏
- Whitelist –ø–æ—Ä—Ç–æ–≤ (prometheus:9090, grafana:3000, harvest:12990/13001/13000-14000)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç injection –∞—Ç–∞–∫

‚úÖ **`scripts/wrappers/manage_vault_certs.sh`**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏–∑ Vault
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π (—Ç–æ–ª—å–∫–æ `/opt/monitoring/certs/`)
- –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ (600 –¥–ª—è keys, 644 –¥–ª—è certs)

‚úÖ **`scripts/wrappers/call_rlm_api.sh`**
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã RLM API
- Whitelist endpoints (create_task, get_task_status)
- –í–∞–ª–∏–¥–∞—Ü–∏—è URL (—Ç–æ–ª—å–∫–æ `rlm.sigma.sbrf.ru`, —Ç–æ–ª—å–∫–æ HTTPS)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ alphanumeric)

---

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä sudoers —Å SHA256 —Ö–µ—à–∞–º–∏

‚úÖ **`sudoers/generate_sudoers_with_hashes.sh`**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤-–æ–±–µ—Ä—Ç–æ–∫
2. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ SHA256 —Ö–µ—à–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ö–µ—à–∞–º–∏
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `$HOME/monitoring_sudoers_generated/`
5. –°–æ–∑–¥–∞–Ω–∏–µ INSTRUCTIONS.md –∏ README.txt

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
./generate_sudoers_with_hashes.sh CI04523276_CI10742292
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
$HOME/monitoring_sudoers_generated/CI10742292/
‚îú‚îÄ‚îÄ sudoers/
‚îÇ   ‚îú‚îÄ‚îÄ CI10742292-lnx-mon_ci        ‚Üê –î–ª—è IDM
‚îÇ   ‚îú‚îÄ‚îÄ CI10742292-lnx-mon_admin
‚îÇ   ‚îî‚îÄ‚îÄ CI10742292-lnx-mon_ro
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ (–≤—Å–µ wrapper scripts)
‚îú‚îÄ‚îÄ INSTRUCTIONS.md                  ‚Üê –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îî‚îÄ‚îÄ README.txt
```

---

### 3. Sudoers templates —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏ (3 —à—Ç.)

‚úÖ **`sudoers/monitoring_ci_wrappers.template`** - –¢–£–ó (CI/CD)
- –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –¥–µ–ø–ª–æ—è
- SHA256 —Ö–µ—à–∏ –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ User Systemd Units
- NOEXEC –¥–ª—è –≤—Å–µ—Ö read-only –∫–æ–º–∞–Ω–¥

‚úÖ **`sudoers/monitoring_admin_wrappers.template`** - –ü–£–ó (Admin)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- Firewall (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ–±–µ—Ä—Ç–∫—É)

‚úÖ **`sudoers/monitoring_ro_wrappers.template`** - ReadOnly
- –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª–æ–≥–æ–≤
- NOEXEC –Ω–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∞—Ö

---

### 4. –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

‚úÖ **`QUICKSTART_SUDOERS_GENERATION.md`**
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 55 –º–∏–Ω—É—Ç (–±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è IDM)
- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- –ß–µ–∫–ª–∏—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

‚úÖ **`docs/SUDOERS_GENERATION_PROCESS.md`**
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- Troubleshooting
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è Jenkins –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

‚úÖ **`docs/QUESTIONS_FOR_CYBERSECURITY.md`**
- 12 –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **`docs/CORPORATE_SECURITY_RULES.md`** (–æ–±–Ω–æ–≤–ª–µ–Ω)
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏ –ö–ë
- 11 —Å–ª—É—á–∞–µ–≤ –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏
- –†–µ—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–º–µ—á–∞–Ω–∏—è

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```
–≠–¢–ê–ü 1: PREPARE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚îÇ
‚îú‚îÄ Jenkins Pipeline (STAGE_MODE=prepare)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è wrapper scripts
‚îÇ   ‚îÇ   ‚îú‚îÄ manage_firewall.sh
‚îÇ   ‚îÇ   ‚îú‚îÄ manage_vault_certs.sh
‚îÇ   ‚îÇ   ‚îî‚îÄ call_rlm_api.sh
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ SHA256 —Ö–µ—à–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ hash1: abc123...
‚îÇ   ‚îÇ   ‚îú‚îÄ hash2: def456...
‚îÇ   ‚îÇ   ‚îî‚îÄ hash3: ghi789...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Å —Ö–µ—à–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ CI10742292-lnx-mon_ci
‚îÇ   ‚îÇ   ‚îú‚îÄ CI10742292-lnx-mon_admin
‚îÇ   ‚îÇ   ‚îî‚îÄ CI10742292-lnx-mon_ro
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
‚îÇ       ‚îî‚îÄ $HOME/monitoring_sudoers_generated/CI10742292/
‚îÇ
‚îú‚îÄ Pipeline –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (sudo –ø—Ä–∞–≤ –µ—â–µ –Ω–µ—Ç) ‚úì
‚îÇ
‚îî‚îÄ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è IDM ‚úì

–†–£–ß–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚îÇ
‚îú‚îÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ scripts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚îÇ   ‚îî‚îÄ /opt/monitoring/scripts/wrappers/
‚îÇ
‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ SHA256 —Ö–µ—à–µ–π
‚îÇ   ‚îî‚îÄ sha256sum *.sh
‚îÇ
‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ 3 –∑–∞—è–≤–æ–∫ –≤ IDM
‚îÇ   ‚îú‚îÄ –î–ª—è CI_USER
‚îÇ   ‚îú‚îÄ –î–ª—è ADMIN_USER
‚îÇ   ‚îî‚îÄ –î–ª—è RO_USER
‚îÇ
‚îú‚îÄ –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (1-3 –¥–Ω—è)
‚îÇ
‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
    ‚îî‚îÄ sudo -l -U CI10742292-lnx-mon_ci ‚úì

–≠–¢–ê–ü 2: DEPLOY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚îÇ
‚îî‚îÄ Jenkins Pipeline (STAGE_MODE=deploy)
    ‚îÇ
    ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ sudo –ø—Ä–∞–≤ ‚úì
    ‚îÇ
    ‚îú‚îÄ Ansible deployment
    ‚îÇ   ‚îú‚îÄ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ tar.gz (Prometheus, Grafana, Harvest)
    ‚îÇ   ‚îú‚îÄ –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤ /opt/monitoring/bin/
    ‚îÇ   ‚îú‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vault Agent
    ‚îÇ   ‚îú‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
    ‚îÇ   ‚îî‚îÄ Deployment User Systemd Units
    ‚îÇ
    ‚îú‚îÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îÇ   ‚îú‚îÄ systemctl --user enable prometheus
    ‚îÇ   ‚îú‚îÄ systemctl --user start prometheus
    ‚îÇ   ‚îî‚îÄ ... (grafana, harvest)
    ‚îÇ
    ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚úì

–†–ï–ó–£–õ–¨–¢–ê–¢: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞! üéâ
```

---

## üìã –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|------------|--------|---------|
| –ù–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö | ‚úÖ | –°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∏ —Å SHA256 |
| –ù–µ—Ç `jq -r` –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ | ‚úÖ | Vault Agent templates |
| `systemctl status` —Å NOEXEC | ‚úÖ | –í—Å–µ read-only —Å NOEXEC |
| `cat >` —Å —è–≤–Ω—ã–º –ø—É—Ç–µ–º | ‚úÖ | –£–¥–∞–ª–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Vault Agent |
| `awk`/`sed` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π | ‚úÖ | –í –æ–±–µ—Ä—Ç –∫–∞—Ö –∏–ª–∏ —É–¥–∞–ª–µ–Ω–æ |
| –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π `/etc/` `/var/` | ‚úÖ | tar.gz + `/opt/monitoring/` |
| –ù–µ—Ç `usermod`/`useradd` | ‚úÖ | IDM + RLM API |
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±–µ–∑ sudo | ‚úÖ | –£–¥–∞–ª–µ–Ω–æ `pwd`, `ps`, `hostname` |
| `journalctl` —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É | ‚úÖ | User Units –Ω–µ —Ç—Ä–µ–±—É—é—Ç |
| `iptables-save` —Å dest | ‚úÖ | –í —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–µ |
| Whitelist –≤–∞–ª–∏–¥–∞—Ü–∏—è | ‚úÖ | –í–æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö |
| SHA256 —Ö–µ—à–∏ | ‚úÖ | –î–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ |

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### Quick Start (55 –º–∏–Ω—É—Ç + –æ–∂–∏–¥–∞–Ω–∏–µ IDM)

```bash
# 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers (5 –º–∏–Ω)
cd secure_deployment/sudoers
./generate_sudoers_with_hashes.sh CI04523276_CI10742292

# 2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ scripts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (10 –º–∏–Ω)
cd $HOME/monitoring_sudoers_generated/CI10742292
scp scripts/*.sh user@server:/tmp/
ssh user@server 'sudo mkdir -p /opt/monitoring/scripts/wrappers && \
                  sudo cp /tmp/*.sh /opt/monitoring/scripts/wrappers/ && \
                  sudo chown CI10742292-lnx-mon_ci:CI10742292-lnx-mon_sys /opt/monitoring/scripts/wrappers/*.sh && \
                  sudo chmod 750 /opt/monitoring/scripts/wrappers/*.sh'

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ SHA256 (2 –º–∏–Ω)
ssh user@server 'sha256sum /opt/monitoring/scripts/wrappers/*.sh'
# –°—Ä–∞–≤–Ω–∏—Ç—å —Å INSTRUCTIONS.md

# 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ IDM (15 –º–∏–Ω)
# https://idm.sberbank.ru/
# - 3 –∑–∞—è–≤–∫–∏ (CI, Admin, RO)
# - –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ sudoers/

# 5. –û–∂–∏–¥–∞–Ω–∏–µ (1-3 –¥–Ω—è)
# ...

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (5 –º–∏–Ω)
ssh user@server 'sudo -l -U CI10742292-lnx-mon_ci'

# 7. Deploy —á–µ—Ä–µ–∑ Jenkins (20-30 –º–∏–Ω)
# STAGE_MODE=deploy
```

**–î–µ—Ç–∞–ª—å–Ω–æ:** –°–º. [QUICKSTART_SUDOERS_GENERATION.md](QUICKSTART_SUDOERS_GENERATION.md)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –¢–∏–ø | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----|------------|--------|------------|
| –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ | 3 | ~10 KB | –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ |
| Sudoers templates | 3 | ~5 KB | –®–∞–±–ª–æ–Ω—ã —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏ |
| –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä | 1 | ~15 KB | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ SHA256 |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 4 | ~50 KB | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ Q&A |
| **–ò–¢–û–ì–û** | **11** | **~80 KB** | |

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∏ | –Ø–∑—ã–∫ |
|-----------|--------|------|
| manage_firewall.sh | 215 | Bash |
| manage_vault_certs.sh | 249 | Bash |
| call_rlm_api.sh | 223 | Bash |
| generate_sudoers_with_hashes.sh | 360 | Bash |
| Sudoers templates | 300 | Sudoers |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 2500+ | Markdown |
| **–ò–¢–û–ì–û** | **~4000** | |

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ö–æ–¥ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- [x] –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [x] SHA256 –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Sudoers templates —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
- [x] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ sudoers
- [x] `.gitattributes` –¥–ª—è LF line endings
- [x] –í—Å–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–æ –∏ –∑–∞–ø—É—à–µ–Ω–æ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] Quick Start —Å–æ–∑–¥–∞–Ω
- [x] –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–∏—Å–∞–Ω
- [x] –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ö–ë —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω—ã
- [x] –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] Troubleshooting —Å–µ–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [x] –ù–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö
- [x] Whitelist –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ–∑–¥–µ
- [x] SHA256 –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- [x] NOEXEC –¥–ª—è read-only –∫–æ–º–∞–Ω–¥
- [x] –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- [x] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—Å–µ–º –∑–∞–º–µ—á–∞–Ω–∏—è–º –ö–ë

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- [x] –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [x] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Jenkins –≥–æ—Ç–æ–≤—ã
- [x] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è IDM –≥–æ—Ç–æ–≤—ã
- [x] –ß–µ–∫–ª–∏—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

---

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã
1. [QUICKSTART_SUDOERS_GENERATION.md](QUICKSTART_SUDOERS_GENERATION.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
2. [docs/SUDOERS_GENERATION_PROCESS.md](docs/SUDOERS_GENERATION_PROCESS.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### –î–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
3. [docs/QUESTIONS_FOR_CYBERSECURITY.md](docs/QUESTIONS_FOR_CYBERSECURITY.md) - –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ö–ë
4. [docs/CORPORATE_SECURITY_RULES.md](docs/CORPORATE_SECURITY_RULES.md) - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
5. [scripts/wrappers/](scripts/wrappers/) - –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤-–æ–±–µ—Ä—Ç–æ–∫
6. [sudoers/](sudoers/) - Templates –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ (–º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å)
1. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
2. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è sudoers —á–µ—Ä–µ–∑ visudo
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å –ö–ë
4. ‚è≥ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ QUESTIONS_FOR_CYBERSECURITY.md
5. ‚è≥ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–º–µ—á–∞–Ω–∏—è–º (–µ—Å–ª–∏ –±—É–¥—É—Ç)
6. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Jenkins Pipeline

### –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –≤ IDM
7. ‚è≥ –ü–µ—Ä–≤—ã–π PREPARE –∑–∞–ø—É—Å–∫
8. ‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ IDM
9. ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (1-3 –¥–Ω—è)
10. ‚è≥ –ü–µ—Ä–≤—ã–π DEPLOY –∑–∞–ø—É—Å–∫
11. ‚è≥ –ü—Ä–æ–¥—É–∫—Ç–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ wrapper scripts —Å SHA256
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Vault Agent
- ‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π (4 —Ç–∏–ø–∞ –£–ó)
- ‚úÖ –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** DevOps Team  
**–î–∞—Ç–∞:** November 19, 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready



