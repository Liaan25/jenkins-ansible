# –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

> **üéâ –í–ï–†–°–ò–Ø 3.0 - –î–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π sudoers –¥–ª—è IDM**

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus + Grafana + Harvest) –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ Enterprise —Å–æ —Å—Ç—Ä–æ–≥–æ–π —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –≤—Å–µ—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±–∞–Ω–∫–∞.

**üÜï –ù–û–í–û–ï –≤ v3.0:**
- ‚úÖ –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (PREPARE ‚Üí DEPLOY)
- ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Å SHA256 —Ö–µ—à–∞–º–∏ –¥–ª—è IDM
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å whitelist –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è–º –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## ‚ö° Quick Start (v3.0)

**–î–ª—è –Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã—Ö - –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞ 55 –º–∏–Ω—É—Ç:**

```bash
# –≠—Ç–∞–ø 1: PREPARE (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers)
cd secure_deployment/sudoers
./generate_sudoers_with_hashes.sh CI04523276_CI10742292

# ‚Üí –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å scripts –Ω–∞ —Å–µ—Ä–≤–µ—Ä
# ‚Üí –°–æ–∑–¥–∞—Ç—å 3 –∑–∞—è–≤–∫–∏ –≤ IDM
# ‚Üí –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (1-3 –¥–Ω—è)

# –≠—Ç–∞–ø 2: DEPLOY (—á–µ—Ä–µ–∑ Jenkins)
# STAGE_MODE=deploy ‚Üí –ø–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```

**–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [QUICKSTART_SUDOERS_GENERATION.md](QUICKSTART_SUDOERS_GENERATION.md)

---

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- –†–∞–±–æ—Ç–∞ —Å –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ User Systemd Units
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤ sudo
- –°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/dev/shm` (tmpfs –≤ RAM)

‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π**
- 4 —Ç–∏–ø–∞ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–°–£–ó, –ü–£–ó, –¢–£–ó, ReadOnly)
- –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è bin, config, data, logs
- –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- üÜï –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ KAE_STEND
- üÜï –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ (–≥—Ä—É–ø–ø–∞ = –∏–º—è –°–£–ó)

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
- Jenkins Pipeline –¥–ª—è CI/CD (–¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
- Ansible playbooks –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RLM –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ü–û
- Vault Agent –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ KAE_STEND –∏–∑ NAMESPACE_CI
- üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Å SHA256 —Ö–µ—à–∞–º–∏

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –Ø–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ sudo –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∑–≤–µ–∑–¥–æ—á–µ–∫
- üÜï –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å SHA256 —Ö–µ—à–∞–º–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–º–µ–Ω—ã
- üÜï Whitelist –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Vault Agent
- –ó–∞—â–∏—Ç–∞ –æ—Ç —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π (NOEXEC —Ñ–ª–∞–≥)
- –ê—É–¥–∏—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
secure_deployment/
‚îú‚îÄ‚îÄ README.md                              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ üÜï README_IMPLEMENTATION_COMPLETE.md   # –ò—Ç–æ–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ v3.0
‚îú‚îÄ‚îÄ üÜï QUICKSTART_SUDOERS_GENERATION.md    # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (55 –º–∏–Ω)
‚îú‚îÄ‚îÄ docs/                                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT_GUIDE.md            # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îÇ   ‚îú‚îÄ‚îÄ IDM_ACCOUNTS_GUIDE.md          # –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ IDM
‚îÇ   ‚îú‚îÄ‚îÄ SUDOERS_GUIDE.md               # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ sudo
‚îÇ   ‚îú‚îÄ‚îÄ SECURITY_MODEL.md              # –°—Ö–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ VAULT_SECRETS_GUIDE.md              # –†–∞–±–æ—Ç–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ Vault
‚îÇ   ‚îú‚îÄ‚îÄ FILESYSTEM_STRUCTURE.md             # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ KAE_STEND_NAMING.md                 # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ DYNAMIC_GROUP_GUIDE.md              # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ (–≥—Ä—É–ø–ø–∞ = –°–£–ó)
‚îÇ   ‚îú‚îÄ‚îÄ üÜï SUDOERS_GENERATION_PROCESS.md    # –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å sudoers
‚îÇ   ‚îú‚îÄ‚îÄ üÜï QUESTIONS_FOR_CYBERSECURITY.md   # –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ üÜï CORPORATE_SECURITY_RULES.md      # –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ + —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã
‚îú‚îÄ‚îÄ scripts/                                # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ deploy_monitoring_secure.sh         # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ setup_vault_agent.sh                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vault Agent
‚îÇ   ‚îú‚îÄ‚îÄ manage_secrets.sh                   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ cleanup_secrets.sh                  # –û—á–∏—Å—Ç–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ verify_security.sh                  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ üÜï wrappers/                        # –°–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ manage_firewall.sh              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ iptables (whitelist)
‚îÇ       ‚îú‚îÄ‚îÄ manage_vault_certs.sh           # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ call_rlm_api.sh                 # –í—ã–∑–æ–≤—ã RLM API
‚îú‚îÄ‚îÄ ansible/                           # Ansible –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ ansible.cfg                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
‚îÇ   ‚îú‚îÄ‚îÄ inventories/                   # –ò–Ω–≤–µ–Ω—Ç–æ—Ä–∏
‚îÇ   ‚îú‚îÄ‚îÄ playbooks/                     # Playbooks
‚îÇ   ‚îú‚îÄ‚îÄ roles/                         # –†–æ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ group_vars/                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø
‚îú‚îÄ‚îÄ systemd/                           # User systemd units
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.service
‚îÇ   ‚îú‚îÄ‚îÄ grafana.service
‚îÇ   ‚îú‚îÄ‚îÄ harvest.service
‚îÇ   ‚îî‚îÄ‚îÄ vault-agent-monitoring.service
‚îú‚îÄ‚îÄ config/                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ vault-agent.hcl                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vault Agent
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ grafana.ini                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grafana
‚îÇ   ‚îî‚îÄ‚îÄ harvest.yml                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Harvest
‚îú‚îÄ‚îÄ sudoers/                                    # –§–∞–π–ª—ã sudoers
‚îÇ   ‚îú‚îÄ‚îÄ monitoring_ci                           # –ü—Ä–∞–≤–∞ –¥–ª—è –¢–£–ó (CI/CD) - legacy
‚îÇ   ‚îú‚îÄ‚îÄ monitoring_admin                        # –ü—Ä–∞–≤–∞ –¥–ª—è –ü–£–ó (Admin) - legacy
‚îÇ   ‚îú‚îÄ‚îÄ monitoring_ro                           # –ü—Ä–∞–≤–∞ –¥–ª—è ReadOnly - legacy
‚îÇ   ‚îú‚îÄ‚îÄ üÜï monitoring_ci_wrappers.template      # Template –¥–ª—è –¢–£–ó —Å SHA256
‚îÇ   ‚îú‚îÄ‚îÄ üÜï monitoring_admin_wrappers.template   # Template –¥–ª—è –ü–£–ó —Å SHA256
‚îÇ   ‚îú‚îÄ‚îÄ üÜï monitoring_ro_wrappers.template      # Template –¥–ª—è RO —Å SHA256
‚îÇ   ‚îú‚îÄ‚îÄ üÜï generate_sudoers_with_hashes.sh      # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å SHA256 (v3.0)
‚îÇ   ‚îú‚îÄ‚îÄ generate_sudoers.sh                     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∏–º–µ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ README_DYNAMIC_USERS.md                 # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∏–º–µ–Ω–∞–º
‚îî‚îÄ‚îÄ Jenkinsfile                        # Jenkins Pipeline

```

## üÜï –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 2.0, –ø—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø** –Ω–∞ –æ—Å–Ω–æ–≤–µ **KAE —Å—Ç–µ–Ω–¥–∞**.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
NAMESPACE_CI = "CI04523276_CI10742292"
                          ‚Üì
            KAE_STEND = "CI10742292"
                          ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- CI10742292-lnx-mon_sys      (–°–£–ó) ‚Üí primary group: CI10742292-lnx-mon_sys
- CI10742292-lnx-mon_admin    (–ü–£–ó) ‚Üí secondary group: CI10742292-lnx-mon_sys
- CI10742292-lnx-mon_ci       (–¢–£–ó) ‚Üí secondary group: CI10742292-lnx-mon_sys
- CI10742292-lnx-mon_ro       (ReadOnly) ‚Üí secondary group: CI10742292-lnx-mon_sys

–ì—Ä—É–ø–ø–∞ –¥–ª—è —Å—Ç–µ–Ω–¥–∞:
- CI10742292-lnx-mon_sys (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –°–£–ó –≤ IDM)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Å—Ç–µ–Ω–¥ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –£–ó –∏ –≥—Ä—É–ø–ø—É  
‚úÖ **–ü—Ä–æ—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –∏–º—è —Å–æ–¥–µ—Ä–∂–∏—Ç KAE —Å—Ç–µ–Ω–¥–∞  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - Jenkins –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º–µ–Ω–∞, IDM —Å–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—É  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç–µ–Ω–¥–æ–≤  
‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Å—Ç–µ–Ω–¥–∞–º–∏ —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—ã  

**üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ**:
- [KAE_STEND_NAMING.md](docs/KAE_STEND_NAMING.md) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [DYNAMIC_GROUP_GUIDE.md](docs/DYNAMIC_GROUP_GUIDE.md) - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ (–≥—Ä—É–ø–ø–∞ = –°–£–ó)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í—ã–±–æ—Ä —Å—Ö–µ–º—ã –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞** (–¥–ª—è –æ–¥–Ω–æ–≥–æ —Å—Ç–µ–Ω–¥–∞)
- `monitoring_svc`, `monitoring_admin`, `monitoring_ci`, `monitoring_ro`

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–µ–Ω–¥–æ–≤)
- `{KAE_STEND}-lnx-mon_sys`, `{KAE_STEND}-lnx-mon_admin`, –∏ —Ç.–¥.

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ IDM** - —Å–º. [IDM_ACCOUNTS_GUIDE.md](docs/IDM_ACCOUNTS_GUIDE.md)
2. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–µ—Ä–µ–∑ RLM** - 7GB –º–∏–Ω–∏–º—É–º
3. **–ü—Ä–∞–≤–∞ sudo —á–µ—Ä–µ–∑ IDM** - —Å–º. [SUDOERS_GUIDE.md](docs/SUDOERS_GUIDE.md)
4. **Vault AppRole** - role_id –∏ secret_id –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Vault
5. **Jenkins** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å –Ω—É–∂–Ω—ã–º–∏ credentials
6. üÜï **NAMESPACE_CI** - –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å '_' (–Ω–∞–ø—Ä–∏–º–µ—Ä: `CI04523276_CI10742292`)

### –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å –£–ó –≤ IDM —Å–æ–≥–ª–∞—Å–Ω–æ IDM_ACCOUNTS_GUIDE.md
   - monitoring_svc (NoLogin) - –°–£–ó
   - monitoring_admin - –ü–£–ó
   - monitoring_ci - –¢–£–ó
   - monitoring_ro - ReadOnly
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ RLM**
   ```bash
   # –ß–µ—Ä–µ–∑ RLM —Å–æ–∑–¥–∞—Ç—å –§–° —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º monitoring_ci
   /opt/monitoring - 7GB
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ sudo**
   ```bash
   # –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ IDM —Å–æ–≥–ª–∞—Å–Ω–æ sudoers/monitoring_system
   ```

4. **–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Jenkins**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å Jenkins Pipeline —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   ```

–ò–ª–∏ **–≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Ansible**:
   ```bash
   cd ansible
   ansible-playbook -i inventories/production playbooks/deploy_monitoring.yml
   ```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [docs/](docs/):

1. **[DEPLOYMENT_GUIDE.md](docs/DEPLOYMENT_GUIDE.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
2. **[IDM_ACCOUNTS_GUIDE.md](docs/IDM_ACCOUNTS_GUIDE.md)** - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –£–ó –≤ IDM
3. **[SUDOERS_GUIDE.md](docs/SUDOERS_GUIDE.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ sudo —á–µ—Ä–µ–∑ IDM
4. **[SECURITY_MODEL.md](docs/SECURITY_MODEL.md)** - –ú–æ–¥–µ–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π
5. **[VAULT_SECRETS_GUIDE.md](docs/VAULT_SECRETS_GUIDE.md)** - –†–∞–±–æ—Ç–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Vault Agent
6. **[FILESYSTEM_STRUCTURE.md](docs/FILESYSTEM_STRUCTURE.md)** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Prometheus** - —Å–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (–ø–æ—Ä—Ç 9090)
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (–ø–æ—Ä—Ç 3000)
- **Harvest** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å NetApp (–ø–æ—Ä—Ç—ã 12990, 12991)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Vault Agent** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- **mTLS** - –≤–∑–∞–∏–º–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **User Systemd** - —Å–µ—Ä–≤–∏—Å—ã –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **Jenkins** - CI/CD pipeline
- **Ansible** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- **RLM** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ RPM –ø–∞–∫–µ—Ç–æ–≤

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è monitoring_admin
systemctl --user status prometheus
systemctl --user status grafana
systemctl --user status harvest
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ß–µ—Ä–µ–∑ Ansible
cd ansible
ansible-playbook -i inventories/production playbooks/update_config.yml
```

### –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Vault Agent
# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
/opt/monitoring/scripts/rotate_secrets.sh
```

## –û—Ç–ª–∏—á–∏—è –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ | –ù–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ |
|--------|----------------|---------------|
| –ü—Ä–∞–≤–∞ | –¢—Ä–µ–±—É–µ—Ç root/sudo –¥–ª—è –≤—Å–µ–≥–æ | –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –£–ó + –º–∏–Ω–∏–º—É–º sudo |
| Systemd | System units –≤ /etc | User units –≤ ~/.config/systemd/user |
| –§–∞–π–ª—ã | /etc, /var, /usr | /opt/monitoring + –¥–æ–º–∞—à–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏ |
| –°–µ–∫—Ä–µ—Ç—ã | –§–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ | /dev/shm (tmpfs –≤ RAM) |
| –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ | root + –£–ó –æ—Ç –ø–∞–∫–µ—Ç–æ–≤ | 4 –£–ó —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ–ª–Ω–æ–º–æ—á–∏–π |
| –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ | 777, chmod -R | –¢–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π |
| Sudoers | –®–∏—Ä–æ–∫–∏–µ –ø—Ä–∞–≤–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ | –Ø–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö |

## –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ü–û –∏–∑ –ø–æ—Ä—Ç–∞–ª–∞ –î–ò  
‚úÖ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ RLM  
‚úÖ –°–∫—Ä–∏–ø—Ç—ã —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è  
‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π  
‚úÖ –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏  
‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è –§–° —Å –ø—Ä–∞–≤–∞–º–∏ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ User systemd units  
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ /dev/shm  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π  
‚úÖ –Ø–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ sudo –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö  
‚úÖ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥  

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs/`.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ.

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è (203/EXEC)

**–°–∏–º–ø—Ç–æ–º—ã:**
- `systemctl --user status grafana` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `status=203/EXEC`
- `/opt/monitoring/bin/` –ø—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- –ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
sudo -u CI10742292-lnx-mon_ci bash
mkdir -p /opt/monitoring/bin/
ln -sf /usr/sbin/grafana-server /opt/monitoring/bin/grafana-server
ln -sf /usr/bin/prometheus /opt/monitoring/bin/prometheus
ln -sf /opt/harvest/bin/harvest /opt/monitoring/bin/harvest
chown CI10742292-lnx-mon_ci:CI10742292-lnx-mon_sys /opt/monitoring/bin/*
chmod 750 /opt/monitoring/bin/*
```

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [QUICK_FIX_INSTRUCTIONS.md](QUICK_FIX_INSTRUCTIONS.md)

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã

**–ü—Ä–∏—á–∏–Ω–∞:** RLM —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç RPM –ø–∞–∫–µ—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:**
- Grafana: `/usr/sbin/grafana-server`
- Prometheus: `/usr/bin/prometheus`
- Harvest: `/opt/harvest/bin/harvest`

**–†–µ—à–µ–Ω–∏–µ:** Ansible playbook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏


