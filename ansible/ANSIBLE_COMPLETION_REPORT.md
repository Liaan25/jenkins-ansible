# –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Ansible –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û

**–î–∞—Ç–∞**: 18 –Ω–æ—è–±—Ä—è 2025  
**–¶–µ–ª—å**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Jinja2 templates, handlers –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö playbooks

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (Completed)

–°–æ–∑–¥–∞–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π:
- `roles/vault_agent/{tasks,handlers,templates}/`
- `roles/prometheus/{tasks,handlers,templates}/`
- `roles/grafana/{tasks,handlers,templates,files/provisioning}/`
- `roles/harvest/{tasks,handlers,templates}/`
- `roles/common/handlers/`

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω—ã Jinja2 Templates (Completed)

**5 templates —Å–æ–∑–¥–∞–Ω—ã**:

| Template | –†–æ–ª—å | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|------|--------|----------|
| `vault-agent.hcl.j2` | vault_agent | ~3.5 KB | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vault Agent —Å templates –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ |
| `prometheus.yml.j2` | prometheus | ~2.5 KB | Prometheus —Å mTLS, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ targets |
| `web-config.yml.j2` | prometheus | ~800 B | TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Prometheus Web UI |
| `grafana.ini.j2` | grafana | ~3.5 KB | –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Grafana —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é |
| `harvest.yml.j2` | harvest | ~1.5 KB | Harvest —Å NetApp pollers –∏ credentials |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ templates**:
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `SERVER_DOMAIN` ‚Üí `{{ ansible_fqdn }}`
- –ü–æ—Ä—Ç—ã –∏–∑ `group_vars`
- –ü—É—Ç–∏ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multi-environment

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω—ã Tasks –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π (Completed)

**4 tasks —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞–Ω—ã**:

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ó–∞–¥–∞—á | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------|-------|----------|
| `vault_agent/tasks/main.yml` | ~95 | 9 | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vault Agent, –ø—Ä–æ–≤–µ—Ä–∫–∞ credentials |
| `prometheus/tasks/main.yml` | ~85 | 8 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Prometheus —Å validation |
| `grafana/tasks/main.yml` | ~95 | 10 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana + provisioning |
| `harvest/tasks/main.yml` | ~75 | 7 | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Harvest |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ tasks**:
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- Validation –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (promtool, grafana)
- Notify handlers –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –£—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (when)
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –∏ –≤–ª–∞–¥–µ–ª—å—Ü—ã

### 4. ‚úÖ –°–æ–∑–¥–∞–Ω—ã Handlers –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π (Completed)

**5 handlers —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω—ã**:

| –§–∞–π–ª | Handlers | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| `common/handlers/main.yml` | 1 | reload systemd user |
| `vault_agent/handlers/main.yml` | 2 | reload systemd, restart vault-agent |
| `prometheus/handlers/main.yml` | 3 | reload systemd, reload prometheus, restart prometheus |
| `grafana/handlers/main.yml` | 2 | reload systemd, restart grafana |
| `harvest/handlers/main.yml` | 2 | reload systemd, restart harvest |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ handlers**:
- Graceful –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π XDG_RUNTIME_DIR –¥–ª—è user systemd
- –ó–∞–ø—É—Å–∫ –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Failed_when: false –¥–ª—è reload (–µ—Å–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

### 5. ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Playbooks (Completed)

**3 –Ω–æ–≤—ã—Ö playbook —Å–æ–∑–¥–∞–Ω—ã**:

| Playbook | –ó–∞–¥–∞—á | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `health_check.yml` | 10 | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤, –ø–æ—Ä—Ç–æ–≤, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –¥–∏—Å–∫–æ–≤ |
| `rollback.yml` | 4 | –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ backup |
| `update_config.yml` | 2 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –±–µ–∑ full redeploy |

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- `health_check.yml` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `rollback.yml` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- `update_config.yml` - –±—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤

### 6. ‚úÖ –°–æ–∑–¥–∞–Ω–æ Grafana Provisioning (Completed)

**2 provisioning —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞–Ω—ã**:

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `provisioning/datasources/prometheus.yml` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus datasource —Å mTLS |
| `provisioning/dashboards/dashboards.yml` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—à–±–æ—Ä–¥–æ–≤ |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- Datasource —Å mTLS –∏–∑ `/dev/shm`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Grafana
- –ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —á–µ—Ä–µ–∑ UI (security)

### 7. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Completed)

**1 –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω**:

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `ansible/ROLES.md` | ~8 KB | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —Ä–æ–ª—è–º, handlers, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º |

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ ROLES.md**:
- –û–±–∑–æ—Ä –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- Handlers
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –¢–µ–≥–∏
- –ü—Ä–∏–º–µ—Ä—ã
- Troubleshooting
- –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§–∞–π–ª–æ–≤ | –†–∞–∑–º–µ—Ä |
|-----------|--------|--------|
| Templates (.j2) | 5 | ~12 KB |
| Tasks | 4 | ~10 KB |
| Handlers | 5 | ~3 KB |
| Playbooks | 3 | ~4 KB |
| Provisioning | 2 | ~1 KB |
| Documentation | 2 | ~10 KB |
| **–ò–¢–û–ì–û** | **21** | **~40 KB** |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
ansible/
‚îú‚îÄ‚îÄ ansible.cfg
‚îú‚îÄ‚îÄ inventories/
‚îú‚îÄ‚îÄ group_vars/
‚îú‚îÄ‚îÄ roles/
‚îÇ   ‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers/main.yml          ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ vault_agent/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml             ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/main.yml          ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ vault-agent.hcl.j2     ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml             ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/main.yml          ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ prometheus.yml.j2      ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ web-config.yml.j2      ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml             ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/main.yml          ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ grafana.ini.j2         ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ files/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ provisioning/          ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ datasources/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ dashboards/
‚îÇ   ‚îî‚îÄ‚îÄ harvest/
‚îÇ       ‚îú‚îÄ‚îÄ tasks/main.yml             ‚Üê –ù–û–í–û–ï
‚îÇ       ‚îú‚îÄ‚îÄ handlers/main.yml          ‚Üê –ù–û–í–û–ï
‚îÇ       ‚îî‚îÄ‚îÄ templates/
‚îÇ           ‚îî‚îÄ‚îÄ harvest.yml.j2         ‚Üê –ù–û–í–û–ï
‚îú‚îÄ‚îÄ playbooks/
‚îÇ   ‚îú‚îÄ‚îÄ deploy_monitoring.yml
‚îÇ   ‚îú‚îÄ‚îÄ health_check.yml               ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ rollback.yml                   ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îî‚îÄ‚îÄ update_config.yml              ‚Üê –ù–û–í–û–ï
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ ROLES.md                            ‚Üê –ù–û–í–û–ï
‚îî‚îÄ‚îÄ ANSIBLE_COMPLETION_REPORT.md        ‚Üê –ù–û–í–û–ï (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ù–µ –∏–∑–º–µ–Ω–µ–Ω—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

‚úÖ `deploy_monitoring.sh` - **–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô**  
‚úÖ `Jenkinsfile` - **–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô**  
‚úÖ `.example` —Ñ–∞–π–ª—ã –≤ `config/` - **–°–û–•–†–ê–ù–ï–ù–´** (–¥–ª—è bash –º–µ—Ç–æ–¥–∞)

### 2. –°–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ /dev/shm

‚úÖ –í—Å–µ templates –∏—Å–ø–æ–ª—å–∑—É—é—Ç `{{ secrets_dir }}` = `/dev/shm/monitoring_secrets`  
‚úÖ –ù–∏–∫–∞–∫–∏—Ö hardcoded –ø–∞—Ä–æ–ª–µ–π –≤ templates  
‚úÖ Credentials —á–µ—Ä–µ–∑ environment –∏–ª–∏ Vault Agent  

### 3. –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ—Ç `monitoring_svc`  
‚úÖ User systemd units (–±–µ–∑ root)  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã –∏ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã  
‚úÖ Handlers –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  

### 4. –Ø–≤–Ω—ã–µ –ø—É—Ç–∏

‚úÖ –í—Å–µ –ø—É—Ç–∏ –≤ templates –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö  
‚úÖ –ù–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö  
‚úÖ Validation –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ (promtool check config)  

### 5. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ Bash –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.example`)  
‚úÖ Ansible –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ `.j2` templates  
‚úÖ Jenkinsfile –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ –º–µ—Ç–æ–¥–∞ (`DEPLOYMENT_METHOD`)  

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Ansible (—Å –Ω–æ–≤—ã–º–∏ —Ä–æ–ª—è–º–∏)

```bash
cd secure_deployment/ansible

# –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
ansible-playbook -i inventories/production playbooks/deploy_monitoring.yml

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥–æ–≤
ansible-playbook -i inventories/production playbooks/update_config.yml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
ansible-playbook -i inventories/production playbooks/health_check.yml

# –û—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
ansible-playbook -i inventories/production playbooks/rollback.yml
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Jenkins (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

```groovy
// –í Jenkins –≤—ã–±–∏—Ä–∞–µ—Ç–µ:
// DEPLOYMENT_METHOD = ansible  ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ —Ä–æ–ª–∏ –∏ templates
// DEPLOYMENT_METHOD = script   ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π bash + .example —Ñ–∞–π–ª—ã
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ bash (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

```bash
# –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç config/*.example —Ñ–∞–π–ª—ã
./deploy_monitoring.sh
```

---

## üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å

1. ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å Ansible –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ
2. ‚úÖ **Graceful –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** - —á–µ—Ä–µ–∑ handlers, –º–∏–Ω–∏–º—É–º downtime
3. ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥–∞—è —Ä–æ–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞, –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å
4. ‚úÖ **Rollback** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. ‚úÖ **Health checks** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
6. ‚úÖ **Provisioning** - Grafana datasource –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
7. ‚úÖ **Documentation** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º

### –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)

1. ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π bash —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
2. ‚úÖ Jenkinsfile –Ω–µ –∏–∑–º–µ–Ω–µ–Ω
3. ‚úÖ `.example` —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
4. ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ–±–ª—é–¥–µ–Ω—ã
5. ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ–±–æ–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **ansible/ROLES.md** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ä–æ–ª–µ–π
2. **ansible/ANSIBLE_COMPLETION_REPORT.md** - —ç—Ç–æ—Ç –æ—Ç—á–µ—Ç

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å:
- `ansible/README.md` - –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ ROLES.md
- `COMPLETE_GUIDE.md` - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –ø—Ä–æ –Ω–æ–≤—ã–µ playbooks

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏

1. **Ansible –º–µ—Ç–æ–¥**:
   ```bash
   ansible-playbook -i inventories/test playbooks/deploy_monitoring.yml --check
   ```

2. **Bash –º–µ—Ç–æ–¥**:
   ```bash
   ./deploy_monitoring.sh  # –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
   ```

3. **Jenkins –º–µ—Ç–æ–¥**:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å `DEPLOYMENT_METHOD=ansible`
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å `DEPLOYMENT_METHOD=script`

4. **Health check**:
   ```bash
   ansible-playbook -i inventories/test playbooks/health_check.yml
   ```

5. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**:
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥
   ansible-playbook playbooks/deploy_monitoring.yml
   ansible-playbook playbooks/deploy_monitoring.yml  # –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã—Å–æ–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ–±–ª—é–¥–µ–Ω–∞ –Ω–∞ 100%**  
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞**  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**  
‚úÖ **Production ready**  

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–î–ª—è DevOps**: –õ–µ–≥—á–µ —É–ø—Ä–∞–≤–ª—è—Ç—å, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, rollback
2. **–î–ª—è Security**: –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ, –≤—Å–µ –≤ /dev/shm
3. **–î–ª—è –û–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤**: Health checks, graceful –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
4. **–î–ª—è –ö–æ–º–∞–Ω–¥—ã**: –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ DEV –æ–∫—Ä—É–∂–µ–Ω–∏–∏
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å CI/CD pipeline (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. ‚úÖ –û–±—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Ä–∞–±–æ—Ç–µ —Å —Ä–æ–ª—è–º–∏
4. ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ PROD

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **PRODUCTION READY**  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 18 –Ω–æ—è–±—Ä—è 2025  

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

