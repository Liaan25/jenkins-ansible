# üìã –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Sudoers

## üéØ –¶–µ–ª—å

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è sudoers —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üì¶ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ **3 sudoers —Ñ–∞–π–ª–∞**, –ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –£–ó:

| –§–∞–π–ª | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –¢–∏–ø –£–ó | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------------|--------|----------|
| `{KAE_STEND}-lnx-mon_ci` | –¢–£–ó | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è | CI/CD –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Jenkins |
| `{KAE_STEND}-lnx-mon_admin` | –ü–£–ó | –ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã |
| `{KAE_STEND}-lnx-mon_ro` | ReadOnly | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ |

**–ü—Ä–∏–º–µ—Ä –¥–ª—è —Å—Ç–µ–Ω–¥–∞ `CI10742292`:**
```
CI10742292-lnx-mon_ci
CI10742292-lnx-mon_admin
CI10742292-lnx-mon_ro
```

---

## üöÄ –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Ñ–∞–π–ª–æ–≤

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –î–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
- Bash shell (Linux/macOS) –∏–ª–∏ Git Bash (Windows)
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

### –ö–æ–º–∞–Ω–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```bash
cd secure_deployment/sudoers
./generate_sudoers.sh <NAMESPACE_CI>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
./generate_sudoers.sh CI04523276_CI10742292
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì KAE_STEND –∏–∑–≤–ª–µ—á–µ–Ω: CI10742292
‚úì –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
  - USER_SYS:   CI10742292-lnx-mon_sys
  - USER_ADMIN: CI10742292-lnx-mon_admin
  - USER_CI:    CI10742292-lnx-mon_ci
  - USER_RO:    CI10742292-lnx-mon_ro

‚úì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sudoers —Ñ–∞–π–ª–æ–≤...
  [OK] generated/CI10742292-lnx-mon_ci (syntax: OK)
  [OK] generated/CI10742292-lnx-mon_admin (syntax: OK)
  [OK] generated/CI10742292-lnx-mon_ro (syntax: OK)

‚úì –í—Å–µ sudoers —Ñ–∞–π–ª—ã —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!
```

### –ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ñ–∞–π–ª—ã

```
secure_deployment/sudoers/generated/
‚îú‚îÄ‚îÄ CI10742292-lnx-mon_ci
‚îú‚îÄ‚îÄ CI10742292-lnx-mon_admin
‚îî‚îÄ‚îÄ CI10742292-lnx-mon_ro
```

---

## üì§ –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ IDM

### 2.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã sudoers** –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ IDM** (–ø–æ—Ä—Ç–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)

### 2.2. –ó–∞–ø—Ä–æ—Å –ø—Ä–∞–≤ –¥–ª—è CI10742292-lnx-mon_ci (–¢–£–ó)

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:** `generated/CI10742292-lnx-mon_ci`

#### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –¢–£–ó:

```sudoers
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –°–£–ó
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys) NOPASSWD: ALL

# –†–∞–±–æ—Ç–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –æ—Ç –∏–º–µ–Ω–∏ –°–£–ó
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/mkdir -p /dev/shm/monitoring_secrets
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/chmod 700 /dev/shm/monitoring_secrets
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/chmod 770 /dev/shm/monitoring_secrets
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/chown -R CI10742292-lnx-mon_ci\:CI10742292-lnx-mon_sys /dev/shm/monitoring_secrets
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/chown -R CI10742292-lnx-mon_sys\:CI10742292-lnx-mon_sys /dev/shm/monitoring_secrets
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/chmod 600 /dev/shm/monitoring_secrets/secrets.json
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/bash -c *
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/bash

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ systemd services –æ—Ç –∏–º–µ–Ω–∏ –°–£–ó
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/systemctl --user daemon-reload
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status *
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/systemctl --user start *
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/systemctl --user stop *
CI10742292-lnx-mon_ci ALL=(CI10742292-lnx-mon_sys:CI10742292-lnx-mon_sys) NOPASSWD: /usr/bin/systemctl --user restart *

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/mkdir -p /opt/monitoring/bin
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/mkdir -p /opt/monitoring/config
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/mkdir -p /opt/monitoring/data
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/mkdir -p /opt/monitoring/logs
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/chown -R CI10742292-lnx-mon_ci\:CI10742292-lnx-mon_sys /opt/monitoring/bin
CI10742292-lnx-mon_ci ALL=(ALL\:ALL) NOPASSWD: /usr/bin/chmod 750 /opt/monitoring/bin
```

**–í IDM:**
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `CI10742292-lnx-mon_ci`
2. –†–∞–∑–¥–µ–ª: "–ü—Ä–∞–≤–∞ sudo"
3. –í—Å—Ç–∞–≤—å—Ç–µ **–ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** —Ñ–∞–π–ª–∞ `CI10742292-lnx-mon_ci`
4. –£–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (–∏–ª–∏ –≥—Ä—É–ø–ø—É —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å—Ç–µ–Ω–¥–∞)
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

---

### 2.3. –ó–∞–ø—Ä–æ—Å –ø—Ä–∞–≤ –¥–ª—è CI10742292-lnx-mon_admin (–ü–£–ó)

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:** `generated/CI10742292-lnx-mon_admin`

#### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –ü–£–ó:

```sudoers
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –°–£–ó
CI10742292-lnx-mon_admin ALL=(CI10742292-lnx-mon_sys) NOPASSWD: ALL

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ systemd services
CI10742292-lnx-mon_admin ALL=(ALL\:ALL) NOPASSWD: /usr/bin/systemctl --user daemon-reload
CI10742292-lnx-mon_admin ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status *
CI10742292-lnx-mon_admin ALL=(ALL\:ALL) NOPASSWD: /usr/bin/systemctl --user restart *

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
CI10742292-lnx-mon_admin ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/journalctl --user -u *
```

**–í IDM:**
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `CI10742292-lnx-mon_admin`
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `CI10742292-lnx-mon_admin`
3. –£–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É

---

### 2.4. –ó–∞–ø—Ä–æ—Å –ø—Ä–∞–≤ –¥–ª—è CI10742292-lnx-mon_ro (ReadOnly)

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:** `generated/CI10742292-lnx-mon_ro`

#### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è ReadOnly:

```sudoers
# –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ª–æ–≥–æ–≤
CI10742292-lnx-mon_ro ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status *
CI10742292-lnx-mon_ro ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/journalctl --user -u *
```

**–í IDM:**
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `CI10742292-lnx-mon_ro`
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `CI10742292-lnx-mon_ro`
3. –£–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 3.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –≤ IDM, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ sudoers
sudo ls -la /etc/sudoers.d/

# –û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:
# CI10742292-lnx-mon_ci
# CI10742292-lnx-mon_admin
# CI10742292-lnx-mon_ro

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
sudo visudo -c -f /etc/sudoers.d/CI10742292-lnx-mon_ci
sudo visudo -c -f /etc/sudoers.d/CI10742292-lnx-mon_admin
sudo visudo -c -f /etc/sudoers.d/CI10742292-lnx-mon_ro
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `parsed OK`

### 3.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤ (–¢–£–ó)

```bash
# –í–æ–π—Ç–∏ –ø–æ–¥ –¢–£–ó
sudo -i -u CI10742292-lnx-mon_ci

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –°–£–ó
sudo -u CI10742292-lnx-mon_sys whoami
# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: CI10742292-lnx-mon_sys

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π sudo —Å –≥—Ä—É–ø–ø–æ–π
sudo -u CI10742292-lnx-mon_sys -g CI10742292-lnx-mon_sys id
# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: uid=... gid=...(CI10742292-lnx-mon_sys) groups=...(CI10742292-lnx-mon_sys)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
sudo -u CI10742292-lnx-mon_sys -g CI10742292-lnx-mon_sys mkdir -p /dev/shm/test_secrets
sudo -u CI10742292-lnx-mon_sys -g CI10742292-lnx-mon_sys ls -lad /dev/shm/test_secrets
sudo -u CI10742292-lnx-mon_sys -g CI10742292-lnx-mon_sys rm -rf /dev/shm/test_secrets
```

### 3.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤ (–ü–£–ó)

```bash
# –í–æ–π—Ç–∏ –ø–æ–¥ –ü–£–ó
sudo -i -u CI10742292-lnx-mon_admin

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl --user status prometheus
```

### 3.4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤ (ReadOnly)

```bash
# –í–æ–π—Ç–∏ –ø–æ–¥ ReadOnly
sudo -i -u CI10742292-lnx-mon_ro

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)
sudo systemctl --user status grafana

# –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–∫–∞–∑–∞–Ω–æ)
sudo systemctl --user restart grafana
# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: Sorry, user CI10742292-lnx-mon_ro is not allowed to execute...
```

---

## üîÑ –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ Jenkins Pipeline

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è sudoers —á–µ—Ä–µ–∑ IDM:

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Jenkins**
2. **–í—ã–±–µ—Ä–∏—Ç–µ Pipeline:** `deploy_monitoring`
3. **–£–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - `SERVER_ADDRESS`: –≤–∞—à —Å–µ—Ä–≤–µ—Ä
   - `NAMESPACE_CI`: `CI04523276_CI10742292`
   - `DEBUG`: `true` (–¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Build**

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

```
[INFO] –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ /dev/shm (—á–µ—Ä–µ–∑ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π sudo)...
‚úì SUCCESS

[INFO] –ü–µ—Ä–µ–¥–∞—á–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ SSH pipe (—á–µ—Ä–µ–∑ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π sudo)...
‚úì SUCCESS

[INFO] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ —Ñ–∞–π–ª —Å–µ–∫—Ä–µ—Ç–æ–≤...
‚úì SUCCESS

[INFO] –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (—á–µ—Ä–µ–∑ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π sudo)...
‚úì SUCCESS
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: `sudo: a password is required`

**–ü—Ä–∏—á–∏–Ω–∞:** Sudoers –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `NOPASSWD`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞: `ls /etc/sudoers.d/CI10742292-lnx-mon_ci`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: `sudo cat /etc/sudoers.d/CI10742292-lnx-mon_ci`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å `NOPASSWD`

---

### –ü—Ä–æ–±–ª–µ–º–∞: `Sorry, user X is not allowed to execute...`

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–º–∞–Ω–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ sudoers –∏–ª–∏ —É–∫–∞–∑–∞–Ω–∞ —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ sudoers
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å `/usr/bin/...` –ø–æ–ª–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `\:`)

---

### –ü—Ä–æ–±–ª–µ–º–∞: `syntax error in /etc/sudoers.d/...`

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ sudoers —Ñ–∞–π–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `sudo visudo -c -f /etc/sudoers.d/CI10742292-lnx-mon_ci`
2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ —É–∫–∞–∑–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
3. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `generate_sudoers.sh` –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **IDM —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** `docs/IDM_ACCOUNTS_GUIDE.md`
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** `docs/KAE_STEND_NAMING.md`
- **–û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è sudoers:** `SUDOERS_SPLIT_SUMMARY.md`
- **–°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** `sudoers/generate_sudoers.sh`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º:

1. **–Ø–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã** ‚Äî –Ω–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ wildcards (`*`) –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
2. **NOEXEC —Ñ–ª–∞–≥** ‚Äî –¥–ª—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (status, journalctl)
3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞** ‚Äî –∫–∞–∂–¥–∞—è –£–ó –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã
4. **–ê—É–¥–∏—Ç** ‚Äî sudo –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
5. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π** ‚Äî –¢–£–ó, –ü–£–ó, ReadOnly –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞

### üö´ –ß—Ç–æ –ù–ï —Ä–∞–∑—Ä–µ—à–µ–Ω–æ:

- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤–Ω–µ `/opt/monitoring` –∏ `/dev/shm/monitoring_secrets`
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ root –ø—Ä–∞–≤–∞–º
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –û–°

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–∞–≤

| –î–µ–π—Å—Ç–≤–∏–µ | –¢–£–ó (CI) | –ü–£–ó (Admin) | ReadOnly |
|----------|----------|-------------|----------|
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –°–£–ó | ‚úÖ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ /dev/shm/monitoring_secrets | ‚úÖ (–æ—Ç –°–£–ó) | ‚ùå | ‚ùå |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (start/stop/restart) | ‚úÖ | ‚úÖ | ‚ùå |
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ (status) | ‚úÖ | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (journalctl) | ‚úÖ | ‚úÖ | ‚úÖ |
| –°–æ–∑–¥–∞–Ω–∏–µ /opt/monitoring —Å—Ç—Ä—É–∫—Ç—É—Ä—ã | ‚úÖ | ‚ùå | ‚ùå |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã | ‚úÖ | ‚ö†Ô∏è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ) | ‚ùå |

---

**‚úÖ –ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Jenkins —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

